import"./DsnmJJEf.js";import{D as vr,z as Te,ak as Gt,G as Dn,A as Ur,y as en,g as o,Z as yt,B as Ia,H as Ta,C as pn,F as Xt,N as xt,aq as Fn,au as Da,I as nr,K as Fa,aK as kr,aL as Sr,J as Ot,aM as Pn,ax as Bn,ao as $n,P as $e,_ as yn,aN as bn,L as Vn,M as Pa,aO as Fr,ag as Ba,aP as ar,aQ as $a,aR as Va,as as qn,aS as qa,al as za,aT as Ha,X as zn,x as H,aU as Ra,av as Ua,at as Ja,az as xn,aV as Ka,ae as Cr,m as Hn,aW as Ya,aX as Wa,Q as Ga,aY as Qa,aZ as Za,a_ as Xa,a$ as ei,b0 as ti,b1 as ri,b2 as ni,b3 as ai,af as ii,b4 as si,p as xe,f as j,b as A,e as f,a as ke,r as c,c as w,d as _e,s as J,aj as Jr,b5 as Re,t as Me,b6 as $t,b7 as Ve,n as Ue,i as ge,h as oe,ai as le,j as _n,W as gt,u as Qt,b8 as oi}from"./_8EcrA37.js";import{l as Rn,i as li,c as di,d as De,b as ci,n as ui,e as fi,f as gi,j as Ar,w as kt,s as P,r as Un,o as vi,k as dt}from"./SRt1qBHR.js";import{r as Jn,i as B,a as rt,s as tn,l as Je,p as Z,c as mi}from"./6qYuQjcF.js";import{i as St}from"./Bn_AA1ho.js";import{g as hi}from"./DPTzgZJO.js";function je(r,e){return e}function pi(r,e,t){for(var n=r.items,a=[],i=e.length,s=0;s<i;s++)qa(e[s].e,a,!0);var l=i>0&&a.length===0&&t!==null;if(l){var d=t.parentNode;za(d),d.append(t),n.clear(),et(r,e[0].prev,e[i-1].next)}Ha(a,()=>{for(var u=0;u<i;u++){var y=e[u];l||(n.delete(y.k),et(r,y.prev,y.next)),ar(y.e,!l)}})}function Le(r,e,t,n,a,i=null){var s=r,l={flags:e,items:new Map,first:null},d=(e&Pn)!==0;if(d){var u=r;s=Te?vr(Gt(u)):u.appendChild(Dn())}Te&&Ur();var y=null,m=!1,h=new Map,_=yt(()=>{var C=t();return $n(C)?C:C==null?[]:Bn(C)}),k,v;function g(){yi(v,k,l,h,s,a,e,n,t),i!==null&&(k.length===0?y?Vn(y):y=nr(()=>i(s)):y!==null&&Pa(y,()=>{y=null}))}en(()=>{v??=zn,k=o(_);var C=k.length;if(m&&C===0)return;m=C===0;let M=!1;if(Te){var S=Ia(s)===Ta;S!==(C===0)&&(s=pn(),vr(s),Xt(!1),M=!0)}if(Te){for(var O=null,b,p=0;p<C;p++){if(xt.nodeType===Fn&&xt.data===Da){s=xt,M=!0,Xt(!1);break}var x=k[p],N=n(x,p);b=Kr(xt,l,O,null,x,N,p,a,e,t),l.items.set(N,b),O=b}C>0&&vr(pn())}if(Te)C===0&&i&&(y=nr(()=>i(s)));else if(Fa()){var F=new Set,I=Ot;for(p=0;p<C;p+=1){x=k[p],N=n(x,p);var D=l.items.get(N)??h.get(N);D?(e&(kr|Sr))!==0&&Kn(D,x,p,e):(b=Kr(null,l,null,null,x,N,p,a,e,t,!0),h.set(N,b)),F.add(N)}for(const[z,L]of l.items)F.has(z)||I.skipped_effects.add(L.e);I.add_callback(g)}else g();M&&Xt(!0),o(_)}),Te&&(s=xt)}function yi(r,e,t,n,a,i,s,l,d){var u=(s&Va)!==0,y=(s&(kr|Sr))!==0,m=e.length,h=t.items,_=t.first,k=_,v,g=null,C,M=[],S=[],O,b,p,x;if(u)for(x=0;x<m;x+=1)O=e[x],b=l(O,x),p=h.get(b),p!==void 0&&(p.a?.measure(),(C??=new Set).add(p));for(x=0;x<m;x+=1){if(O=e[x],b=l(O,x),p=h.get(b),p===void 0){var N=n.get(b);if(N!==void 0){n.delete(b),h.set(b,N);var F=g?g.next:k;et(t,g,N),et(t,N,F),Pr(N,F,a),g=N}else{var I=k?k.e.nodes_start:a;g=Kr(I,t,g,g===null?t.first:g.next,O,b,x,i,s,d)}h.set(b,g),M=[],S=[],k=g.next;continue}if(y&&Kn(p,O,x,s),(p.e.f&Fr)!==0&&(Vn(p.e),u&&(p.a?.unfix(),(C??=new Set).delete(p))),p!==k){if(v!==void 0&&v.has(p)){if(M.length<S.length){var D=S[0],z;g=D.prev;var L=M[0],K=M[M.length-1];for(z=0;z<M.length;z+=1)Pr(M[z],D,a);for(z=0;z<S.length;z+=1)v.delete(S[z]);et(t,L.prev,K.next),et(t,g,L),et(t,K,D),k=D,g=K,x-=1,M=[],S=[]}else v.delete(p),Pr(p,k,a),et(t,p.prev,p.next),et(t,p,g===null?t.first:g.next),et(t,g,p),g=p;continue}for(M=[],S=[];k!==null&&k.k!==b;)(k.e.f&Fr)===0&&(v??=new Set).add(k),S.push(k),k=k.next;if(k===null)continue;p=k}M.push(p),g=p,k=p.next}if(k!==null||v!==void 0){for(var $=v===void 0?[]:Bn(v);k!==null;)(k.e.f&Fr)===0&&$.push(k),k=k.next;var E=$.length;if(E>0){var T=(s&Pn)!==0&&m===0?a:null;if(u){for(x=0;x<E;x+=1)$[x].a?.measure();for(x=0;x<E;x+=1)$[x].a?.fix()}pi(t,$,T)}}u&&Ba(()=>{if(C!==void 0)for(p of C)p.a?.apply()}),r.first=t.first&&t.first.e,r.last=g&&g.e;for(var R of n.values())ar(R.e);n.clear()}function Kn(r,e,t,n){(n&kr)!==0&&bn(r.v,e),(n&Sr)!==0?bn(r.i,t):r.i=t}function Kr(r,e,t,n,a,i,s,l,d,u,y){var m=(d&kr)!==0,h=(d&$a)===0,_=m?h?$e(a,!1,!1):yn(a):a,k=(d&Sr)===0?s:yn(s),v={i:k,v:_,k:i,a:null,e:null,prev:t,next:n};try{if(r===null){var g=document.createDocumentFragment();g.append(r=Dn())}return v.e=nr(()=>l(r,_,k,u),Te),v.e.prev=t&&t.e,v.e.next=n&&n.e,t===null?y||(e.first=v):(t.next=v,t.e.next=v.e),n!==null&&(n.prev=v,n.e.prev=v.e),v}finally{}}function Pr(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,a=e?e.e.nodes_start:t,i=r.e.nodes_start;i!==null&&i!==n;){var s=qn(i);a.before(i),i=s}}function et(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Yr(r,e,t=!1,n=!1,a=!1){var i=r,s="";H(()=>{var l=zn;if(s===(s=e()??"")){Te&&Ur();return}if(l.nodes_start!==null&&(Ra(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),s!==""){if(Te){xt.data;for(var d=Ur(),u=d;d!==null&&(d.nodeType!==Fn||d.data!=="");)u=d,d=qn(d);if(d===null)throw Ua(),Ja;xn(xt,u),i=vr(d);return}var y=s+"";t?y=`<svg>${y}</svg>`:n&&(y=`<math>${y}</math>`);var m=Ka(y);if((t||n)&&(m=Gt(m)),xn(Gt(m),m.lastChild),t||n)for(;Gt(m);)i.before(Gt(m));else i.before(m)}})}function bi(r,e,t){Cr(()=>{var n=Hn(()=>e(r,t?.())||{});if(n?.destroy)return()=>n.destroy()})}function xi(r,e){var t=void 0,n;en(()=>{t!==(t=e())&&(n&&(ar(n),n=null),t&&(n=nr(()=>{Cr(()=>t(r))})))})}function Yn(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(e=0;e<a;e++)r[e]&&(t=Yn(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function _i(){for(var r,e,t=0,n="",a=arguments.length;t<a;t++)(r=arguments[t])&&(e=Yn(r))&&(n&&(n+=" "),n+=e);return n}function wi(r){return typeof r=="object"?_i(r):r??""}const wn=[...` 	
\r\fÂ \v\uFEFF`];function ki(r,e,t){var n=r==null?"":""+r;if(e&&(n=n?n+" "+e:e),t){for(var a in t)if(t[a])n=n?n+" "+a:a;else if(n.length)for(var i=a.length,s=0;(s=n.indexOf(a,s))>=0;){var l=s+i;(s===0||wn.includes(n[s-1]))&&(l===n.length||wn.includes(n[l]))?n=(s===0?"":n.substring(0,s))+n.substring(l+1):s=l}}return n===""?null:n}function kn(r,e=!1){var t=e?" !important;":";",n="";for(var a in r){var i=r[a];i!=null&&i!==""&&(n+=" "+a+": "+i+t)}return n}function Br(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function Si(r,e){if(e){var t="",n,a;if(Array.isArray(e)?(n=e[0],a=e[1]):n=e,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,s=0,l=!1,d=[];n&&d.push(...Object.keys(n).map(Br)),a&&d.push(...Object.keys(a).map(Br));var u=0,y=-1;const v=r.length;for(var m=0;m<v;m++){var h=r[m];if(l?h==="/"&&r[m-1]==="*"&&(l=!1):i?i===h&&(i=!1):h==="/"&&r[m+1]==="*"?l=!0:h==='"'||h==="'"?i=h:h==="("?s++:h===")"&&s--,!l&&i===!1&&s===0){if(h===":"&&y===-1)y=m;else if(h===";"||m===v-1){if(y!==-1){var _=Br(r.substring(u,y).trim());if(!d.includes(_)){h!==";"&&m++;var k=r.substring(u,m).trim();t+=" "+k+";"}}u=m+1,y=-1}}}}return n&&(t+=kn(n)),a&&(t+=kn(a,!0)),t=t.trim(),t===""?null:t}return r==null?null:String(r)}function ae(r,e,t,n,a,i){var s=r.__className;if(Te||s!==t||s===void 0){var l=ki(t,n,i);(!Te||l!==r.getAttribute("class"))&&(l==null?r.removeAttribute("class"):e?r.className=l:r.setAttribute("class",l)),r.__className=t}else if(i&&a!==i)for(var d in i){var u=!!i[d];(a==null||u!==!!a[d])&&r.classList.toggle(d,u)}return i}function $r(r,e={},t,n){for(var a in t){var i=t[a];e[a]!==i&&(t[a]==null?r.style.removeProperty(a):r.style.setProperty(a,i,n))}}function Ci(r,e,t,n){var a=r.__style;if(Te||a!==e){var i=Si(e,n);(!Te||i!==r.getAttribute("style"))&&(i==null?r.removeAttribute("style"):r.style.cssText=i),r.__style=e}else n&&(Array.isArray(n)?($r(r,t?.[0],n[0]),$r(r,t?.[1],n[1],"important")):$r(r,t,n));return n}function yr(r,e,t=!1){if(r.multiple){if(e==null)return;if(!$n(e))return Ya();for(var n of r.options)n.selected=e.includes(er(n));return}for(n of r.options){var a=er(n);if(Wa(a,e)){n.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function Wn(r){var e=new MutationObserver(()=>{yr(r,r.__value)});e.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ga(()=>{e.disconnect()})}function Gn(r,e,t=e){var n=!0;Rn(r,"change",a=>{var i=a?"[selected]":":checked",s;if(r.multiple)s=[].map.call(r.querySelectorAll(i),er);else{var l=r.querySelector(i)??r.querySelector("option:not([disabled])");s=l&&er(l)}t(s)}),Cr(()=>{var a=e();if(yr(r,a,n),n&&a===void 0){var i=r.querySelector(":checked");i!==null&&(a=er(i),t(a))}r.__value=a,n=!1}),Wn(r)}function er(r){return"__value"in r?r.__value:r.value}const Kt=Symbol("class"),Yt=Symbol("style"),Qn=Symbol("is custom element"),Zn=Symbol("is html");function ft(r){if(Te){var e=!1,t=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var n=r.value;de(r,"value",null),r.value=n}if(r.hasAttribute("checked")){var a=r.checked;de(r,"checked",null),r.checked=a}}};r.__on_r=t,ni(t),gi()}}function br(r,e){var t=rn(r);t.checked!==(t.checked=e??void 0)&&(r.checked=e)}function Ai(r,e){e?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function de(r,e,t,n){var a=rn(r);Te&&(a[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||a[e]!==(a[e]=t)&&(e==="loading"&&(r[ti]=t),t==null?r.removeAttribute(e):typeof t!="string"&&Xn(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function Oi(r,e,t,n,a=!1){var i=rn(r),s=i[Qn],l=!i[Zn];let d=Te&&s;d&&Xt(!1);var u=e||{},y=r.tagName==="OPTION";for(var m in e)m in t||(t[m]=null);t.class?t.class=wi(t.class):t[Kt]&&(t.class=null),t[Yt]&&(t.style??=null);var h=Xn(r);for(const S in t){let O=t[S];if(y&&S==="value"&&O==null){r.value=r.__value="",u[S]=O;continue}if(S==="class"){var _=r.namespaceURI==="http://www.w3.org/1999/xhtml";ae(r,_,O,n,e?.[Kt],t[Kt]),u[S]=O,u[Kt]=t[Kt];continue}if(S==="style"){Ci(r,O,e?.[Yt],t[Yt]),u[S]=O,u[Yt]=t[Yt];continue}var k=u[S];if(!(O===k&&!(O===void 0&&r.hasAttribute(S)))){u[S]=O;var v=S[0]+S[1];if(v!=="$$")if(v==="on"){const b={},p="$$"+S;let x=S.slice(2);var g=fi(x);if(li(x)&&(x=x.slice(0,-7),b.capture=!0),!g&&k){if(O!=null)continue;r.removeEventListener(x,u[p],b),u[p]=null}if(O!=null)if(g)r[`__${x}`]=O,De([x]);else{let N=function(F){u[S].call(this,F)};u[p]=di(x,r,N,b)}else g&&(r[`__${x}`]=void 0)}else if(S==="style")de(r,S,O);else if(S==="autofocus")ci(r,!!O);else if(!s&&(S==="__value"||S==="value"&&O!=null))r.value=r.__value=O;else if(S==="selected"&&y)Ai(r,O);else{var C=S;l||(C=ui(C));var M=C==="defaultValue"||C==="defaultChecked";if(O==null&&!s&&!M)if(i[S]=null,C==="value"||C==="checked"){let b=r;const p=e===void 0;if(C==="value"){let x=b.defaultValue;b.removeAttribute(C),b.defaultValue=x,b.value=b.__value=p?x:null}else{let x=b.defaultChecked;b.removeAttribute(C),b.defaultChecked=x,b.checked=p?x:!1}}else r.removeAttribute(S);else M||h.includes(C)&&(s||typeof O!="string")?r[C]=O:typeof O!="function"&&de(r,C,O)}}}return d&&Xt(!0),u}function Vt(r,e,t=[],n=[],a,i=!1){Qa(t,n,s=>{var l=void 0,d={},u=r.nodeName==="SELECT",y=!1;if(en(()=>{var h=e(...s.map(o)),_=Oi(r,l,h,a,i);y&&u&&"value"in h&&yr(r,h.value);for(let v of Object.getOwnPropertySymbols(d))h[v]||ar(d[v]);for(let v of Object.getOwnPropertySymbols(h)){var k=h[v];v.description===Za&&(!l||k!==l[v])&&(d[v]&&ar(d[v]),d[v]=nr(()=>xi(r,()=>k))),_[v]=k}l=_}),u){var m=r;Cr(()=>{yr(m,l.value,!0),Wn(m)})}y=!0})}function rn(r){return r.__attributes??={[Qn]:r.nodeName.includes("-"),[Zn]:r.namespaceURI===Xa}}var Sn=new Map;function Xn(r){var e=Sn.get(r.nodeName);if(e)return e;Sn.set(r.nodeName,e=[]);for(var t,n=r,a=Element.prototype;a!==n;){t=ri(n);for(var i in t)t[i].set&&e.push(i);n=ei(n)}return e}function It(r,e,t=e){var n=ai(),a=new WeakSet;Rn(r,"input",i=>{var s=i?r.defaultValue:r.value;if(s=Vr(r)?qr(s):s,t(s),Ot!==null&&a.add(Ot),n&&s!==(s=e())){var l=r.selectionStart,d=r.selectionEnd;r.value=s??"",d!==null&&(r.selectionStart=l,r.selectionEnd=Math.min(d,r.value.length))}}),(Te&&r.defaultValue!==r.value||Hn(e)==null&&r.value)&&(t(Vr(r)?qr(r.value):r.value),Ot!==null&&a.add(Ot)),ii(()=>{var i=e();if(r===document.activeElement){var s=si??Ot;if(a.has(s))return}Vr(r)&&i===qr(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}function Vr(r){var e=r.type;return e==="number"||e==="range"}function qr(r){return r===""?null:+r}const zr="";class Ni{async request(e,t){const n=await fetch(`${zr}${e}`,{headers:{"Content-Type":"application/json",...t?.headers},...t});if(!n.ok)throw new Error(`API Error: ${n.status} ${n.statusText}`);return n.json()}async loadAll(){return this.request("/api/data/all")}async getControls(){return this.request("/api/controls")}async getControl(e){return this.request(`/api/controls/${e}`)}async updateControl(e){return this.request(`/api/controls/${e.id}`,{method:"PUT",body:JSON.stringify(e)})}async deleteControl(e){return this.request(`/api/controls/${e}`,{method:"DELETE"})}async getMappings(){return this.request("/api/mappings")}async getMapping(e){return this.request(`/api/mappings/${e}`)}async createMapping(e){return this.request("/api/mappings",{method:"POST",body:JSON.stringify(e)})}async updateMapping(e){return this.request(`/api/mappings/${e.uuid}`,{method:"PUT",body:JSON.stringify(e)})}async deleteMapping(e){return this.request(`/api/mappings/${e}`,{method:"DELETE"})}async search(e){return this.request(`/api/search?q=${encodeURIComponent(e)}`)}async getStats(){return this.request("/api/stats")}async getControlSet(){return this.request("/api/control-set")}async exportExcel(){const e=await fetch(`${zr}/api/export/excel`,{method:"POST"});if(!e.ok)throw new Error(`Export Error: ${e.status} ${e.statusText}`);return e.blob()}async importCSV(e){const t=new FormData;t.append("file",e);const n=await fetch(`${zr}/api/import/csv`,{method:"POST",body:t});if(!n.ok)throw new Error(`Import Error: ${n.status} ${n.statusText}`)}async getControlHistory(e,t){const n=t?`?limit=${t}`:"";return this.request(`/api/controls/${e}/history${n}`)}async getControlWithHistory(e,t){const n=t?`?limit=${t}`:"";return this.request(`/api/controls/${e}/with-history${n}`)}async getGitStats(){return this.request("/api/git/stats")}async getMappingHistory(e,t=20){return this.request(`/api/mappings/${e}/history?limit=${t}`)}async getControlComplete(e,t){const n=t?`?limit=${t}`:"";return this.request(`/api/controls/${e}/complete${n}`)}async getFileContentAtCommit(e,t,n,a){let i=`/api/git/file/${e}/${t}`;t==="mapping"&&a&&(i+=`/${a}`);const s=new URLSearchParams;return n&&s.append("controlId",n),s.toString()&&(i+=`?${s.toString()}`),this.request(i)}}const ct=new Ni,Ft=kt([]),Nt=kt([]),Cn=kt(!0),Wt=kt("saved"),Pt=kt(""),ir=kt(null),Wr=kt(null),Ei=Ar(Ft,r=>{const e=new Set(r.map(t=>t["control-acronym"].split("-")[0]));return Array.from(e).sort()}),Mi=Ar([Ft,ir,Pt],([r,e,t])=>{let n=r;if(e&&(n=n.filter(a=>a["control-acronym"].startsWith(e))),t){const a=t.toLowerCase();n=n.filter(i=>JSON.stringify(i).toLowerCase().includes(a))}return n}),ji=Ar([Ft,Nt],([r,e])=>r.map(t=>({...t,mappings:e.filter(n=>n.control_id===t.id)}))),nt={async init(){try{Cn.set(!0);const r=await ct.loadAll();Ft.set(r.controls),Nt.set(r.mappings)}catch(r){console.error("Failed to load data:",r),Wt.set("error")}finally{Cn.set(!1)}},async updateControl(r){Wt.set("saving"),Ft.update(e=>{const t=e.findIndex(n=>n.id===r.id);return t!==-1&&(e[t]=r),e});try{await ct.updateControl(r),Wt.set("saved"),setTimeout(()=>{Wt.update(e=>e==="saved"?"saved":e)},2e3)}catch(e){console.error("Failed to update control:",e),Wt.set("error")}},async createMapping(r){try{const e=await ct.createMapping(r);return Nt.update(t=>[...t,e]),e}catch(e){throw console.error("Failed to create mapping:",e),e}},async updateMapping(r){Nt.update(e=>{const t=e.findIndex(n=>n.uuid===r.uuid);return t!==-1&&(e[t]=r),e});try{await ct.updateMapping(r)}catch(e){throw console.error("Failed to update mapping:",e),e}},async deleteMapping(r){Nt.update(e=>e.filter(t=>t.uuid!==r));try{await ct.deleteMapping(r)}catch(e){throw console.error("Failed to delete mapping:",e),e}},async search(r){try{return await ct.search(r)}catch(e){return console.error("Search failed:",e),{controls:[],mappings:[]}}},setSearchTerm(r){Pt.set(r)},setSelectedFamily(r){ir.set(r)},setSelectedControl(r){if(r&&"mappings"in r){const{mappings:e,...t}=r;Wr.set(t)}else Wr.set(r)},clearFilters(){Pt.set(""),ir.set(null)}};function Li(r,e){J(e,""),nt.setSearchTerm("")}var Ii=j('<button class="absolute inset-y-0 right-0 pr-3 flex items-center" aria-label="Clear search"><svg class="w-5 h-5 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),Ti=j('<div class="absolute top-full mt-1 text-sm text-gray-600 dark:text-gray-300"> </div>'),Di=j('<div class="relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="w-5 h-5 text-gray-400 dark:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" placeholder="Search controls and mappings..." class="block w-full pl-10 pr-12 py-2 border border-gray-300 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"/> <!> <!></div>');function Fi(r,e){xe(e,!0);const[t,n]=tn(),a=()=>rt(Pt,"$searchTerm",t),i=()=>rt(Mi,"$filteredControls",t);let s=ke(""),l;function d(v){clearTimeout(l),l=setTimeout(()=>{nt.setSearchTerm(v)},300)}Jn(()=>{d(o(s))});var u=Di(),y=A(f(u),2);ft(y);var m=A(y,2);{var h=v=>{var g=Ii();g.__click=[Li,s],w(v,g)};B(m,v=>{o(s)&&v(h)})}var _=A(m,2);{var k=v=>{var g=Ti(),C=f(g);c(g),H(()=>P(C,`${i().length??""} results found`)),w(v,g)};B(_,v=>{a()&&v(k)})}c(u),It(y,()=>o(s),v=>J(s,v)),w(r,u),_e(),n()}De(["click"]);function Pi(r){const e=r.querySelector(".tooltip");r.setAttribute("data-tooltip-trigger","true");function t(){if(!e)return;const a=r.getBoundingClientRect();if(Object.entries({"--group-top":`${a.top}px`,"--group-right":`${a.right}px`,"--group-left":`${a.left}px`,"--group-width":`${a.width}px`,"--group-bottom":`${a.bottom}px`,"--group-height":`${a.height}px`}).forEach(([s,l])=>e.style.setProperty(s,l)),!/tooltip-(left|right|top|bottom)/.test(e.className)){const s=window.innerWidth-a.right,l=window.innerHeight-a.bottom,d=288,u=100,y=s<d+20?"left":"right",m=l<u+20?"top":"bottom",_=y==="left"&&a.left<d||l<u&&a.top>u||a.top<u&&l>u?`tooltip-${m}`:`tooltip-${y}`;e.className=e.className.replace(/tooltip-(left|right|top|bottom)/g,"")+" "+_}}const n=()=>window.requestAnimationFrame(t);return r.addEventListener("mouseenter",n),{update:t,destroy(){r.removeEventListener("mouseenter",n),r.removeAttribute("data-tooltip-trigger")}}}var Bi=()=>nt.setSelectedFamily(null),$i=(r,e)=>nt.setSelectedFamily(o(e)),Vi=j('<button> <span class="ml-1.5 px-1.5 py-0.5 text-xs bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-300 rounded-full"> </span></button>'),qi=(r,e,t)=>e(o(t)),zi=(r,e,t)=>r.key==="Enter"||r.key===" "?e(o(t)):null,Hi=j('<div role="button" tabindex="0"><div class="flex flex-col justify-center"><div class="text-sm font-semibold text-gray-900 dark:text-white"> </div> <div class="text-xs text-gray-500 dark:text-gray-400 font-medium"> </div></div> <div class="flex flex-col justify-center"><div class="relative group text-sm text-gray-500 dark:text-gray-400 font-mono cursor-help"> <div class="tooltip invisible group-hover:visible absolute z-50 w-72 p-3 text-sm text-white bg-gray-900 dark:bg-gray-900 rounded-lg shadow-lg border border-gray-600"><div class="font-medium text-blue-200 mb-1">CCI Definition:</div> <div class="text-gray-200"> </div></div></div></div> <div class="flex flex-col justify-center"><div class="text-sm text-gray-900 dark:text-white line-clamp-2"> </div></div> <div class="flex items-center justify-center"><span> </span></div> <div class="flex items-center justify-center"><span> </span></div> <div class="flex items-center justify-center"><span class="inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"> </span></div></div>'),Ri=j('<div class="flex items-center justify-center py-16"><div class="text-center"><svg class="mx-auto h-16 w-16 text-gray-300 dark:text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h3 class="mt-4 text-lg font-medium text-gray-900 dark:text-white">No controls found</h3> <p class="mt-2 text-sm text-gray-500 dark:text-gray-400 max-w-sm mx-auto"><!></p></div></div>'),Ui=j('<div class="h-full flex flex-col"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0 space-y-4"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-gray-900 dark:text-white">Controls</h2> <span class="text-sm text-gray-600 dark:text-gray-400"> </span></div> <!> <div class="space-y-2"><div class="text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider">Filter by Family</div> <div class="flex flex-wrap gap-2"><button>All <span class="ml-1.5 px-1.5 py-0.5 text-xs bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-300 rounded-full"> </span></button> <!></div></div></div> <div class="flex-1 flex flex-col overflow-hidden"><div class="bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-600 flex-shrink-0"><div class="grid grid-cols-6 gap-4 px-6 py-3"><div class="text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Control</div> <div class="text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">CCI</div> <div class="text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Description</div> <div class="text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Implementation</div> <div class="text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Compliance</div> <div class="text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Mappings</div></div></div> <div class="flex-1 overflow-auto"><div class="divide-y divide-gray-200 dark:divide-gray-700"></div></div></div> <!></div>');function dd(r,e){xe(e,!1);const[t,n]=tn(),a=()=>rt(y,"$filteredControlsWithMappings",t),i=()=>rt(Ft,"$controls",t),s=()=>rt(ir,"$selectedFamily",t),l=()=>rt(Ei,"$families",t),d=()=>rt(Wr,"$selectedControl",t),u=()=>rt(Pt,"$searchTerm",t),y=Ar([ji,ir,Pt],([$,E,T])=>{let R=$;if(E&&(R=R.filter(W=>W["control-acronym"].startsWith(E))),T){const W=T.toLowerCase();R=R.filter(q=>JSON.stringify(q).toLowerCase().includes(W))}return R});function m($){hi(`/control/${encodeURIComponent($.id)}`)}function h($){switch($){case"Implemented":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300";case"Planned":return"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300";case"Not Implemented":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300"}}function _($){switch($){case"Compliant":return"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-300";case"Non-Compliant":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300";case"Not Assessed":return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300"}}St();var k=Ui(),v=f(k),g=f(v),C=A(f(g),2),M=f(C);c(C),c(g);var S=A(g,2);Fi(S,{});var O=A(S,2),b=A(f(O),2),p=f(b);p.__click=[Bi];var x=A(f(p)),N=f(x,!0);c(x),c(p);var F=A(p,2);Le(F,1,l,je,($,E)=>{var T=Vi();const R=yt(()=>i().filter(G=>G["control-acronym"].startsWith(o(E))).length);T.__click=[$i,E];var W=f(T),q=A(W),V=f(q,!0);c(q),c(T),H(()=>{ae(T,1,`inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-full transition-all duration-200 ${s()===o(E)?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 ring-2 ring-blue-500 ring-opacity-30":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`),P(W,`${o(E)??""} `),P(V,o(R))}),w($,T)}),c(b),c(O),c(v);var I=A(v,2),D=A(f(I),2),z=f(D);Le(z,5,a,je,($,E)=>{var T=Hi();const R=yt(()=>o(E)["control-information"]),W=yt(()=>o(R).indexOf("Description:")+12),q=yt(()=>o(R).indexOf("Supplemental Guidance:")),V=yt(()=>o(q)>o(W)?o(R).substring(o(W),o(q)).trim():o(R).split(`
`).slice(0,3).join(" ").trim()),G=yt(()=>o(V).replace(/^(a\.|b\.|1\.|2\.|\s|The organization:)+/,"").replace(/\s+/g," ").trim());T.__click=[qi,m,E],T.__keydown=[zi,m,E];var re=f(T),he=f(re),ye=f(he,!0);c(he);var Ne=A(he,2),ne=f(Ne,!0);c(Ne),c(re);var te=A(re,2),ie=f(te),ve=f(ie),be=A(ve),me=A(f(be),2),we=f(me,!0);c(me),c(be),c(ie),bi(ie,U=>Pi?.(U)),c(te);var ue=A(te,2),Ee=f(ue),Be=f(Ee);c(Ee),c(ue);var fe=A(ue,2),Ie=f(fe),We=f(Ie,!0);c(Ie),c(fe);var Ge=A(fe,2),Qe=f(Ge),mt=f(Qe,!0);c(Qe),c(Ge);var st=A(Ge,2),ot=f(st),Ut=f(ot,!0);c(ot),c(st),c(T),H((U,Y,X)=>{ae(T,1,`grid grid-cols-6 gap-4 px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer transition-all duration-150 ${d()?.id===o(E).id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 shadow-sm":""}`),de(T,"aria-label",`Select control ${o(E).id??""}`),P(ye,o(E).id),P(ne,o(E)["control-acronym"]),P(ve,`${o(E).cci??""} `),P(we,o(E)["cci-definition"]),P(Be,`${U??""}${o(G).length>120?"...":""}`),ae(Ie,1,`inline-flex px-2.5 py-1 text-xs font-medium rounded-full ${Y??""}`),P(We,o(E)["control-implementation-status"]),ae(Qe,1,`inline-flex px-2.5 py-1 text-xs font-medium rounded-full ${X??""}`),P(mt,o(E)["compliance-status"]),P(Ut,o(E).mappings.length)},[()=>o(G).substring(0,120),()=>h(o(E)["control-implementation-status"]),()=>_(o(E)["compliance-status"])]),w($,T)}),c(z),c(D),c(I);var L=A(I,2);{var K=$=>{var E=Ri(),T=f(E),R=A(f(T),4),W=f(R);{var q=G=>{var re=Jr("No controls match your search criteria. Try adjusting your search terms or clearing filters.");w(G,re)},V=G=>{var re=Jr("No controls available in this family. Select a different family or check your data.");w(G,re)};B(W,G=>{u()?G(q):G(V,!1)})}c(R),c(T),c(E),w($,E)};B(L,$=>{a().length===0&&$(K)})}c(k),H(()=>{P(M,`${a().length??""} of ${i().length??""}`),ae(p,1,`inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-full transition-all duration-200 ${s()===null?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 ring-2 ring-blue-500 ring-opacity-30":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`),P(N,i().length)}),w(r,k),_e(),n()}De(["click","keydown"]);var Ji=Ve("<title> </title>"),Ki=Ve('<svg><!><path d="M23,16a7,7,0,0,0-4.18,1.39L14.6,13.17A6.86,6.86,0,0,0,16,9a7,7,0,1,0-2.81,5.59l4.21,4.22A7,7,0,1,0,23,16ZM4,9a5,5,0,1,1,5,5A5,5,0,0,1,4,9Z" transform="translate(0 .01)"></path></svg>');function Yi(r,e){const t=Je(e,["children","$$slots","$$events","$$legacy"]),n=Je(t,["size","title"]);xe(e,!1);const a=$e(),i=$e();let s=Z(e,"size",8,16),l=Z(e,"title",8,void 0);Re(()=>(Me(t),Me(l())),()=>{J(a,t["aria-label"]||t["aria-labelledby"]||l())}),Re(()=>(o(a),Me(t)),()=>{J(i,{"aria-hidden":o(a)?void 0:!0,role:o(a)?"img":void 0,focusable:Number(t.tabindex)===0?!0:void 0})}),$t(),St();var d=Ki();Vt(d,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:s(),height:s(),...o(i),...n}));var u=f(d);{var y=m=>{var h=Ji(),_=f(h,!0);c(h),H(()=>P(_,l())),w(m,h)};B(u,m=>{l()&&m(y)})}Ue(),c(d),w(r,d),_e()}var Wi=Ve("<title> </title>"),Gi=Ve('<svg><!><path d="M2 26H30V28H2zM25.4 9c.8-.8.8-2 0-2.8 0 0 0 0 0 0l-3.6-3.6c-.8-.8-2-.8-2.8 0 0 0 0 0 0 0l-15 15V24h6.4L25.4 9zM20.4 4L24 7.6l-3 3L17.4 7 20.4 4zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"></path></svg>');function Qi(r,e){const t=Je(e,["children","$$slots","$$events","$$legacy"]),n=Je(t,["size","title"]);xe(e,!1);const a=$e(),i=$e();let s=Z(e,"size",8,16),l=Z(e,"title",8,void 0);Re(()=>(Me(t),Me(l())),()=>{J(a,t["aria-label"]||t["aria-labelledby"]||l())}),Re(()=>(o(a),Me(t)),()=>{J(i,{"aria-hidden":o(a)?void 0:!0,role:o(a)?"img":void 0,focusable:Number(t.tabindex)===0?!0:void 0})}),$t(),St();var d=Gi();Vt(d,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:s(),height:s(),...o(i),...n}));var u=f(d);{var y=m=>{var h=Wi(),_=f(h,!0);c(h),H(()=>P(_,l())),w(m,h)};B(u,m=>{l()&&m(y)})}Ue(),c(d),w(r,d),_e()}var Zi=Ve("<title> </title>"),Xi=Ve('<svg><!><path d="M17 22L17 14 13 14 13 16 15 16 15 22 12 22 12 24 20 24 20 22 17 22zM16 8a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 8z"></path><path d="M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"></path></svg>');function es(r,e){const t=Je(e,["children","$$slots","$$events","$$legacy"]),n=Je(t,["size","title"]);xe(e,!1);const a=$e(),i=$e();let s=Z(e,"size",8,16),l=Z(e,"title",8,void 0);Re(()=>(Me(t),Me(l())),()=>{J(a,t["aria-label"]||t["aria-labelledby"]||l())}),Re(()=>(o(a),Me(t)),()=>{J(i,{"aria-hidden":o(a)?void 0:!0,role:o(a)?"img":void 0,focusable:Number(t.tabindex)===0?!0:void 0})}),$t(),St();var d=Xi();Vt(d,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:s(),height:s(),...o(i),...n}));var u=f(d);{var y=m=>{var h=Zi(),_=f(h,!0);c(h),H(()=>P(_,l())),w(m,h)};B(u,m=>{l()&&m(y)})}Ue(2),c(d),w(r,d),_e()}var ts=Ve("<title> </title>"),rs=Ve('<svg><!><path d="M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"></path><path d="M20.59 22L15 16.41 15 7 17 7 17 15.58 22 20.59 20.59 22z"></path></svg>');function ns(r,e){const t=Je(e,["children","$$slots","$$events","$$legacy"]),n=Je(t,["size","title"]);xe(e,!1);const a=$e(),i=$e();let s=Z(e,"size",8,16),l=Z(e,"title",8,void 0);Re(()=>(Me(t),Me(l())),()=>{J(a,t["aria-label"]||t["aria-labelledby"]||l())}),Re(()=>(o(a),Me(t)),()=>{J(i,{"aria-hidden":o(a)?void 0:!0,role:o(a)?"img":void 0,focusable:Number(t.tabindex)===0?!0:void 0})}),$t(),St();var d=rs();Vt(d,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:s(),height:s(),...o(i),...n}));var u=f(d);{var y=m=>{var h=ts(),_=f(h,!0);c(h),H(()=>P(_,l())),w(m,h)};B(u,m=>{l()&&m(y)})}Ue(2),c(d),w(r,d),_e()}var as=j("<span> </span>");function ea(r,e){let t=Z(e,"type",3,"control"),n=Z(e,"size",3,"sm");const a=(d,u)=>{if(u==="mapping")switch(d.toLowerCase()){case"implemented":return"bg-green-500 text-white";case"verified":return"bg-blue-500 text-white";case"planned":return"bg-yellow-500 text-white";default:return"bg-gray-600 text-white"}if(u==="compliance")switch(d.toLowerCase()){case"compliant":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"non-compliant":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"not assessed":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}switch(d.toLowerCase()){case"implemented":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"planned":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"not implemented":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},i=d=>{switch(d){case"sm":return"px-2.5 py-0.5 text-xs";case"md":return"px-3 py-1 text-sm";case"lg":return"px-4 py-2 text-base";default:return"px-2.5 py-0.5 text-xs"}};var s=as(),l=f(s,!0);c(s),H((d,u)=>{ae(s,1,`inline-flex items-center rounded-lg font-medium shadow-sm ${d??""} ${u??""}`),de(s,"title",`${t()} status: ${e.status}`),P(l,e.status)},[()=>a(e.status,t()),()=>i(n())]),w(r,s)}var is=(r,e,t)=>!o(e).disabled&&t.onSelect(o(e).id),ss=j('<span class="ml-1 text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-full"> </span>'),os=j("<button><!> <!></button>"),ls=j('<nav class="border-b border-gray-200 dark:border-gray-700 flex-shrink-0"><div class="flex space-x-4"></div></nav>');function ds(r,e){xe(e,!0);var t=ls(),n=f(t);Le(n,21,()=>e.tabs,je,(a,i)=>{var s=os();s.__click=[is,i,e];var l=f(s);{var d=h=>{var _=ge();const k=le(()=>o(i).icon);var v=oe(_);mi(v,()=>o(k),(g,C)=>{C(g,{class:"w-4 h-4 mr-2"})}),w(h,_)};B(l,h=>{o(i).icon&&h(d)})}var u=A(l),y=A(u);{var m=h=>{var _=ss(),k=f(_,!0);c(_),H(()=>P(k,o(i).count)),w(h,_)};B(y,h=>{o(i).count!==void 0&&h(m)})}c(s),H(()=>{s.disabled=o(i).disabled,ae(s,1,`inline-flex items-center py-4 border-b-2 font-medium text-sm transition-colors px-4 ${e.active===o(i).id?"border-blue-500 text-blue-600 dark:text-blue-400":o(i).disabled?"border-transparent text-gray-300 dark:text-gray-600 cursor-not-allowed":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`),P(u,` ${o(i).label??""} `)}),w(a,s)}),c(n),c(t),w(r,t),_e()}De(["click"]);var cs=j("<div><!></div>"),us=Ve('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg>'),fs=j('<div class="mt-6"><!></div>'),gs=j("<div><!> <h3> </h3> <p> </p> <!></div>");function An(r,e){let t=Z(e,"size",3,"md");const a=(v=>{switch(v){case"sm":return{container:"py-6",icon:"h-8 w-8",title:"text-sm",description:"text-xs"};case"lg":return{container:"py-16",icon:"h-16 w-16",title:"text-lg",description:"text-base"};default:return{container:"py-12",icon:"h-12 w-12",title:"text-base",description:"text-sm"}}})(t());var i=gs(),s=f(i);{var l=v=>{var g=cs(),C=f(g);_n(C,()=>e.icon),c(g),H(()=>ae(g,1,`mx-auto ${a.icon??""} mb-4 text-gray-400 dark:text-gray-500`)),w(v,g)},d=v=>{var g=us();H(()=>ae(g,0,`mx-auto ${a.icon??""} mb-4 text-gray-400 dark:text-gray-500`)),w(v,g)};B(s,v=>{e.icon?v(l):v(d,!1)})}var u=A(s,2),y=f(u,!0);c(u);var m=A(u,2),h=f(m,!0);c(m);var _=A(m,2);{var k=v=>{var g=fs(),C=f(g);_n(C,()=>e.action),c(g),w(v,g)};B(_,v=>{e.action&&v(k)})}c(i),H(()=>{ae(i,1,`text-center ${a.container??""}`),ae(u,1,`font-medium text-gray-900 dark:text-white ${a.title??""}`),P(y,e.title),ae(m,1,`mt-2 text-gray-500 dark:text-gray-400 ${a.description??""}`),P(h,e.description)}),w(r,i)}De(["click"]);var vs=j('<span class="text-red-500 ml-1">*</span>'),ms=j('<div class="absolute bottom-3 right-3 text-xs text-gray-400"> </div>'),hs=j('<div class="relative"><textarea></textarea> <!></div>'),ps=j("<option> </option>"),ys=j('<div class="relative"><select></select> <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"><svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"></path></svg></div></div>'),bs=j('<input type="text"/>'),xs=j('<div class="flex items-center space-x-1"><svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-sm text-red-600 dark:text-red-400"> </p></div>'),_s=j('<div class="space-y-2"><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"> <!></label> <!> <!></div>');function On(r,e){xe(e,!0);let t=Z(e,"type",3,"text"),n=Z(e,"value",15),a=Z(e,"options",19,()=>[]),i=Z(e,"rows",3,4),s=Z(e,"required",3,!1);const l=e.error?"border-red-400 focus:ring-red-500 focus:border-red-500":"",d=!e.error&&n()?"border-green-400 dark:border-green-600":"";var u=_s(),y=f(u),m=f(y,!0),h=A(m);{var _=S=>{var O=vs();w(S,O)};B(h,S=>{s()&&S(_)})}c(y);var k=A(y,2);{var v=S=>{var O=hs(),b=f(O);Un(b),b.__change=function(...N){e.onChange?.apply(this,N)};var p=A(b,2);{var x=N=>{var F=ms(),I=f(F);c(F),H(()=>P(I,`${n().length??""} characters`)),w(N,F)};B(p,N=>{n()&&N(x)})}c(O),H(()=>{de(b,"id",e.id),de(b,"rows",i()),de(b,"placeholder",e.placeholder),ae(b,1,`w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${l} ${d} resize-vertical min-h-[100px]`)}),It(b,n),w(S,O)},g=S=>{var O=ge(),b=oe(O);{var p=N=>{var F=ys(),I=f(F);I.__change=function(...D){e.onChange?.apply(this,D)},Le(I,21,a,je,(D,z)=>{var L=ps(),K=f(L,!0);c(L);var $={};H(()=>{P(K,o(z)),$!==($=o(z))&&(L.value=(L.__value=o(z))??"")}),w(D,L)}),c(I),Ue(2),c(F),H(()=>{de(I,"id",e.id),ae(I,1,`w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${l} ${d} cursor-pointer`)}),Gn(I,n),w(N,F)},x=N=>{var F=bs();ft(F),F.__change=function(...I){e.onChange?.apply(this,I)},H(()=>{de(F,"id",e.id),de(F,"placeholder",e.placeholder),ae(F,1,`w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${l} ${d}`)}),It(F,n),w(N,F)};B(b,N=>{t()==="select"&&a().length>0?N(p):N(x,!1)},!0)}w(S,O)};B(k,S=>{t()==="textarea"?S(v):S(g,!1)})}var C=A(k,2);{var M=S=>{var O=xs(),b=A(f(O),2),p=f(b,!0);c(b),c(O),H(()=>P(p,e.error)),w(S,O)};B(C,S=>{e.error&&S(M)})}c(u),H(()=>{de(y,"for",e.id),P(m,e.label)}),w(r,u),_e()}De(["change"]);var ws=j('<span class="text-red-500 ml-1">*</span>'),ks=j('<p class="text-xs text-gray-500 dark:text-gray-400 mb-2"> </p>'),Ss=j("<textarea></textarea>"),Cs=j("<option>-- Select an option --</option>"),As=j("<option> </option>"),Os=j("<select><!><!></select>"),Ns=(r,e)=>e(!0),Es=(r,e)=>e(!1),Ms=j('<div class="flex items-center space-x-3"><label class="flex items-center"><input type="radio" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600"/> <span class="ml-2 text-sm text-gray-900 dark:text-white">Yes</span></label> <label class="flex items-center"><input type="radio" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600"/> <span class="ml-2 text-sm text-gray-900 dark:text-white">No</span></label></div>'),js=j('<input type="date"/>'),Ls=j('<input type="text"/>'),Is=j('<p class="text-sm text-red-600 dark:text-red-400"> </p>'),Ts=j('<div class="space-y-1"><label class="block text-sm font-medium text-gray-700 dark:text-gray-300"> <!></label> <!> <!> <!></div>');function Nn(r,e){xe(e,!0);let t=Z(e,"value",15),n=Z(e,"readonly",3,!1);const a=n()?"bg-gray-50 dark:bg-gray-900 cursor-not-allowed":"",i=e.error?"border-red-500 focus:ring-red-500":"";function s(){e.onChange?.()}let l=le(()=>e.field.type==="boolean"?typeof t()=="boolean"?t():typeof t()=="string"?t().toLowerCase()==="true"||t()==="1"||t()==="yes":!!t():t());function d(b){t(b),s()}var u=Ts(),y=f(u),m=f(y),h=A(m);{var _=b=>{var p=ws();w(b,p)};B(h,b=>{e.field.required&&b(_)})}c(y);var k=A(y,2);{var v=b=>{var p=ks(),x=f(p,!0);c(p),H(()=>P(x,e.field.description)),w(b,p)};B(k,b=>{e.field.description&&b(v)})}var g=A(k,2);{var C=b=>{var p=Ss();Un(p),p.__change=s,H(()=>{de(p,"id",e.field.id),de(p,"rows",e.field.rows||4),de(p,"placeholder",e.field.placeholder),ae(p,1,`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-blue-500 ${a} ${i} resize-vertical`),p.readOnly=n()}),It(p,t),w(b,p)},M=b=>{var p=ge(),x=oe(p);{var N=I=>{var D=Os();D.__change=s;var z=f(D);{var L=$=>{var E=Cs();E.value=E.__value="",w($,E)};B(z,$=>{e.field.required||$(L)})}var K=A(z);Le(K,17,()=>e.field.options,je,($,E)=>{var T=As(),R=f(T,!0);c(T);var W={};H(()=>{P(R,o(E)),W!==(W=o(E))&&(T.value=(T.__value=o(E))??"")}),w($,T)}),c(D),H(()=>{de(D,"id",e.field.id),ae(D,1,`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-blue-500 ${a} ${i}`),D.disabled=n()}),Gn(D,t),w(I,D)},F=I=>{var D=ge(),z=oe(D);{var L=$=>{var E=Ms(),T=f(E),R=f(T);ft(R),R.__change=[Ns,d],Ue(2),c(T);var W=A(T,2),q=f(W);ft(q),q.__change=[Es,d],Ue(2),c(W),c(E),H(()=>{de(R,"id",`${e.field.id??""}-true`),de(R,"name",e.field.id),br(R,o(l)===!0),R.disabled=n(),de(q,"id",`${e.field.id??""}-false`),de(q,"name",e.field.id),br(q,o(l)===!1),q.disabled=n()}),w($,E)},K=$=>{var E=ge(),T=oe(E);{var R=q=>{var V=js();ft(V),V.__change=s,H(()=>{de(V,"id",e.field.id),de(V,"placeholder",e.field.placeholder),ae(V,1,`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-blue-500 ${a} ${i}`),V.readOnly=n()}),It(V,t),w(q,V)},W=q=>{var V=Ls();ft(V),V.__change=s,H(()=>{de(V,"id",e.field.id),de(V,"placeholder",e.field.placeholder),ae(V,1,`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-blue-500 ${a} ${i}`),V.readOnly=n()}),It(V,t),w(q,V)};B(T,q=>{e.field.type==="date"?q(R):q(W,!1)},!0)}w($,E)};B(z,$=>{e.field.type==="boolean"?$(L):$(K,!1)},!0)}w(I,D)};B(x,I=>{e.field.type==="select"&&e.field.options?.length?I(N):I(F,!1)},!0)}w(b,p)};B(g,b=>{e.field.type==="textarea"?b(C):b(M,!1)})}var S=A(g,2);{var O=b=>{var p=Is(),x=f(p,!0);c(p),H(()=>P(x,e.error)),w(b,p)};B(S,b=>{e.error&&b(O)})}c(u),H(()=>{de(y,"for",e.field.id),P(m,`${e.field.label??""} `)}),w(r,u),_e()}De(["change"]);var Ds=j('<div class="border-b border-gray-200 dark:border-gray-700 dark:bg-gray-800 px-6 py-4"><h3 class="text-lg font-medium text-gray-900 dark:text-white capitalize"> </h3></div>'),Fs=j('<div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm overflow-hidden"><!> <div class="p-6"><div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-6"></div> <div class="space-y-6"></div></div></div>'),Ps=j('<div class="space-y-8"></div>');function En(r,e){xe(e,!0);let t=Z(e,"control",15),n=Z(e,"readonly",3,!1),a=gt({});const i=le(()=>{const y={};return e.schema.fields.forEach(m=>{const h=m.group||"general";y[h]||(y[h]=[]),y[h].push(m)}),y});function s(y){l(y),e.onChange?.()}function l(y){const m=e.schema.fields.find(g=>g.id===y);if(!m)return;const h=t()[y];let _="";if(m.required&&(!h||typeof h=="string"&&h.trim()==="")&&(_=`${m.label} is required`),m.validation&&h)for(const g of m.validation){if(g.type==="minLength"&&typeof h=="string"&&h.length<g.value){_=g.message||`${m.label} must be at least ${g.value} characters`;break}if(g.type==="maxLength"&&typeof h=="string"&&h.length>g.value){_=g.message||`${m.label} must be no more than ${g.value} characters`;break}if(g.type==="pattern"&&typeof h=="string"&&!new RegExp(g.pattern).test(h)){_=g.message||`${m.label} format is invalid`;break}}_?a[y]=_:delete a[y];const v={valid:!(Object.keys(a).length>0),errors:Object.entries(a).map(([g,C])=>({field:g,message:C})),warnings:[]};e.onValidation?.(v)}let d=ke(!1);Qt(()=>{t()&&!o(d)&&(J(d,!0),e.schema.fields.forEach(y=>{if(t()[y.id]!==void 0){const m=y.id,h=e.schema.fields.find(v=>v.id===m);if(!h)return;const _=t()[m];let k="";h.required&&(!_||typeof _=="string"&&_.trim()==="")&&(k=`${h.label} is required`),k?a[m]=k:delete a[m]}}))});var u=Ps();Le(u,21,()=>Object.entries(o(i)),je,(y,m)=>{var h=le(()=>oi(o(m),2));let _=()=>o(h)[0],k=()=>o(h)[1];var v=Fs(),g=f(v);{var C=b=>{var p=Ds(),x=f(p),N=f(x,!0);c(x),c(p),H(F=>P(N,F),[()=>_().replace(/([A-Z])/g," $1").trim()]),w(b,p)};B(g,b=>{_()!=="general"&&b(C)})}var M=A(g,2),S=f(M);Le(S,21,k,je,(b,p)=>{var x=ge(),N=oe(x);{var F=I=>{Nn(I,{get field(){return o(p)},get readonly(){return n()},get error(){return a[o(p).id]},onChange:()=>s(o(p).id),get value(){return t()[o(p).id]},set value(D){t(t()[o(p).id]=D,!0)}})};B(N,I=>{o(p).type!=="textarea"&&I(F)})}w(b,x)}),c(S);var O=A(S,2);Le(O,21,k,je,(b,p)=>{var x=ge(),N=oe(x);{var F=I=>{Nn(I,{get field(){return o(p)},get readonly(){return n()},get error(){return a[o(p).id]},onChange:()=>s(o(p).id),get value(){return t()[o(p).id]},set value(D){t(t()[o(p).id]=D,!0)}})};B(N,I=>{o(p).type==="textarea"&&I(F)})}w(b,x)}),c(O),c(M),c(v),w(y,v)}),c(u),w(r,u),_e()}De(["click","keydown"]);De(["click","keydown"]);function Bs(r,e){navigator.clipboard.writeText(`@mapControl ${e.mapping.uuid}`)}function $s(r,e){e.onEdit?.(e.mapping)}function Vs(r,e){confirm("Are you sure you want to delete this mapping?")&&e.onDelete?.(e.mapping.uuid)}var qs=j('<button class="inline-flex items-center px-3 py-2 text-xs font-medium text-blue-600 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-100 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-all duration-200 shadow-sm hover:shadow" title="Edit mapping">Edit</button> <button class="inline-flex items-center px-3 py-2 text-xs font-medium text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 transition-all duration-200 shadow-sm hover:shadow" title="Delete mapping">Delete</button>',1),zs=j('<div class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm hover:shadow-md transition-all duration-200"><div class="bg-gray-100 dark:bg-gray-900 rounded-t-xl px-6 py-4 border-b border-gray-200 dark:border-gray-700"><div class="flex justify-between items-start"><span class="inline-flex items-center px-3 py-1 rounded-lg text-xs font-mono font-medium bg-gray-900 dark:bg-gray-900 text-gray-100 dark:text-gray-200 shadow-sm"> </span> <div class="flex items-center space-x-2"><button class="inline-flex items-center px-3 py-2 text-xs font-medium text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 shadow-sm hover:shadow" title="Copy UUID to clipboard">Copy UUID</button> <!></div></div></div> <div class="px-6 py-4"><p class="text-sm text-gray-700 dark:text-gray-300 leading-relaxed mb-4"> </p> <div class="flex items-center justify-start"><!></div></div></div>');function Hs(r,e){xe(e,!0);let t=Z(e,"showActions",3,!1);var n=zs(),a=f(n),i=f(a),s=f(i),l=f(s);c(s);var d=A(s,2),u=f(d);u.__click=[Bs,e];var y=A(u,2);{var m=C=>{var M=qs(),S=oe(M);S.__click=[$s,e];var O=A(S,2);O.__click=[Vs,e],w(C,M)};B(y,C=>{t()&&C(m)})}c(d),c(i),c(a);var h=A(a,2),_=f(h),k=f(_,!0);c(_);var v=A(_,2),g=f(v);ea(g,{get status(){return e.mapping.status},type:"mapping"}),c(v),c(h),c(n),H(()=>{P(l,`@mapControl ${e.mapping.uuid??""}`),P(k,e.mapping.justification)}),w(r,n),_e()}De(["click"]);function Rs(r,e,t,n,a){!o(e)||t()||n.onSubmit(o(a))}function Us(r,e,t,n){J(e,{justification:t().justification||"",status:t().status||"planned"},!0),n.onCancel()}var Js=j('<div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4 space-y-4"><h4 class="text-lg font-medium text-gray-900 dark:text-white"> </h4> <div class="space-y-4"><!> <!></div> <div class="flex justify-end space-x-3"><button class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-500 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">Cancel</button> <button> </button></div></div>');function Ks(r,e){xe(e,!0);let t=Z(e,"initialData",19,()=>({})),n=Z(e,"loading",3,!1),a=Z(e,"submitLabel",3,"Create Mapping"),i=ke(gt({justification:t().justification||"",status:t().status||"planned"}));const s=["planned","implemented","verified"],l=le(()=>o(i).justification.trim().length>0);var d=Js(),u=f(d),y=f(u,!0);c(u);var m=A(u,2),h=f(m);On(h,{id:"mapping-status",label:"Status",type:"select",get options(){return s},get value(){return o(i).status},set value(M){o(i).status=M}});var _=A(h,2);On(_,{id:"mapping-justification",label:"Justification",type:"textarea",rows:4,placeholder:"Explain why this mapping is necessary...",required:!0,get value(){return o(i).justification},set value(M){o(i).justification=M}}),c(m);var k=A(m,2),v=f(k);v.__click=[Us,i,t,e];var g=A(v,2);g.__click=[Rs,l,n,e,i];var C=f(g,!0);c(g),c(k),c(d),H(()=>{P(y,t().justification?"Edit Mapping":"Create New Mapping"),v.disabled=n(),g.disabled=!o(l)||n(),ae(g,1,`px-4 py-2 text-sm font-medium transition-colors rounded-md ${o(l)&&!n()?"text-white bg-blue-600 hover:bg-blue-700":"text-gray-400 bg-gray-200 dark:bg-gray-700 cursor-not-allowed"}`),P(C,n()?"Saving...":a())}),w(r,d),_e()}De(["click"]);var Ys=j('<div class="flex items-center space-x-2"><svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="text-sm font-medium text-gray-700 dark:text-gray-300 font-mono"> </span></div>'),Ws=j("<div></div>"),Gs=(r,e)=>J(e,!o(e)),Qs=j('<button class="inline-flex items-center px-2 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"><svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg> </button>'),Zs=j('<div class="bg-gray-50 dark:bg-gray-800 px-4 py-2 border-b border-gray-200 dark:border-gray-600"><div class="flex items-center justify-between"><!> <!></div></div>'),Xs=j('<div><div class="line-numbers flex text-xs text-gray-400 dark:text-gray-500 font-mono select-none border-r border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-750"><div class="w-8 px-2 py-1 text-right"> </div> <div class="w-8 px-2 py-1 text-right"> </div></div> <div> </div> <div><!></div></div>'),eo=j('<div class="diff-viewer border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden svelte-5lt4fy"><!> <div class="diff-content max-h-96 overflow-y-auto"></div></div>');function to(r,e){xe(e,!0);let t=Z(e,"fileName",3,""),n=Z(e,"language",3,"yaml"),a=Z(e,"compact",3,!1),i=Z(e,"showToggle",3,!0),s=ke(gt(a())),l=ke(gt([]));function d(v){const g=v.split(`
`),C=[];let M=1,S=1,O=!1;for(let b=0;b<g.length;b++){const p=g[b];if(p.startsWith("---")||p.startsWith("+++")){C.push({type:"header",content:p});continue}if(p.startsWith("@@")){const x=p.match(/@@\s-(\d+)(?:,\d+)?\s\+(\d+)(?:,\d+)?\s@@/);x&&(M=parseInt(x[1]),S=parseInt(x[2]),O=!0),C.push({type:"hunk",content:p});continue}if(!O)if(p.startsWith("+")||p.startsWith("-")||p.startsWith(" "))O=!0,M===1&&S===1&&(M=1,S=1);else continue;p.startsWith("+")?C.push({type:"addition",content:p.slice(1),newLineNumber:S++}):p.startsWith("-")?C.push({type:"deletion",content:p.slice(1),oldLineNumber:M++}):p.startsWith(" ")?C.push({type:"context",content:p.slice(1),oldLineNumber:M++,newLineNumber:S++}):p===""&&O?C.push({type:"context",content:"",oldLineNumber:M++,newLineNumber:S++}):O&&C.push({type:"context",content:p,oldLineNumber:M++,newLineNumber:S++})}return C}function u(v){return v.replace(/^(\s*)([a-zA-Z_][a-zA-Z0-9_-]*)\s*:/gm,'$1<span class="text-blue-600 dark:text-blue-400 font-medium">$2</span>:').replace(/:\s*("[^"]*")/g,': <span class="text-green-600 dark:text-green-400">$1</span>').replace(/:\s*(\d+)/g,': <span class="text-purple-600 dark:text-purple-400">$1</span>').replace(/:\s*(true|false|null)/g,': <span class="text-orange-600 dark:text-orange-400">$1</span>').replace(/^\s*-\s/gm,'<span class="text-gray-500 dark:text-gray-400">-</span> ').replace(/#.*$/gm,'<span class="text-gray-500 dark:text-gray-400 italic">$&</span>')}function y(v){const g=[],M=new Set;return v.forEach((S,O)=>{if(S.type==="addition"||S.type==="deletion")for(let b=Math.max(0,O-2);b<=Math.min(v.length-1,O+2);b++)M.add(b)}),v.forEach((S,O)=>{(S.type==="header"||S.type==="hunk"||M.has(O))&&g.push(S)}),g}Jn(()=>{J(l,o(s)?y(d(e.diff)):d(e.diff),!0)});var m=eo(),h=f(m);{var _=v=>{var g=Zs(),C=f(g),M=f(C);{var S=x=>{var N=Ys(),F=A(f(N),2),I=f(F,!0);c(F),c(N),H(()=>P(I,t())),w(x,N)},O=x=>{var N=Ws();w(x,N)};B(M,x=>{t()?x(S):x(O,!1)})}var b=A(M,2);{var p=x=>{var N=Qs();N.__click=[Gs,s];var F=A(f(N));c(N),H(()=>P(F,` ${o(s)?"Full":"Compact"}`)),w(x,N)};B(b,x=>{i()&&x(p)})}c(C),c(g),w(v,g)};B(h,v=>{(t()||i())&&v(_)})}var k=A(h,2);Le(k,21,()=>o(l),je,(v,g)=>{var C=Xs(),M=f(C),S=f(M),O=f(S,!0);c(S);var b=A(S,2),p=f(b,!0);c(b),c(M);var x=A(M,2),N=f(x,!0);c(x);var F=A(x,2),I=f(F);{var D=L=>{var K=ge(),$=oe(K);Yr($,()=>u(o(g).content)),w(L,K)},z=L=>{var K=Jr();H(()=>P(K,o(g).content)),w(L,K)};B(I,L=>{n()==="yaml"&&(o(g).type==="context"||o(g).type==="addition"||o(g).type==="deletion")?L(D):L(z,!1)})}c(F),c(C),H(()=>{ae(C,1,`diff-line flex ${o(g).type==="addition"?"bg-green-50 dark:bg-green-900/20":o(g).type==="deletion"?"bg-red-50 dark:bg-red-900/20":o(g).type==="hunk"||o(g).type==="header"?"bg-gray-100 dark:bg-gray-800":"bg-white dark:bg-gray-900"}`,"svelte-5lt4fy"),P(O,o(g).type!=="addition"&&o(g).oldLineNumber?o(g).oldLineNumber:""),P(p,o(g).type!=="deletion"&&o(g).newLineNumber?o(g).newLineNumber:""),ae(x,1,`change-indicator w-6 flex items-center justify-center text-sm font-mono ${o(g).type==="addition"?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20":o(g).type==="deletion"?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20":"text-gray-400 dark:text-gray-500"}`),P(N,o(g).type==="addition"?"+":o(g).type==="deletion"?"-":""),ae(F,1,`content flex-1 px-2 py-1 font-mono text-sm leading-relaxed whitespace-pre-wrap ${o(g).type==="hunk"?"text-gray-600 dark:text-gray-400 font-medium":o(g).type==="header"?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`)}),w(v,C)}),c(k),c(m),w(r,m),_e()}De(["click"]);const nn=Symbol.for("yaml.alias"),Gr=Symbol.for("yaml.document"),vt=Symbol.for("yaml.map"),ta=Symbol.for("yaml.pair"),Or=Symbol.for("yaml.scalar"),qt=Symbol.for("yaml.seq"),Ke=Symbol.for("yaml.node.type"),Ct=r=>!!r&&typeof r=="object"&&r[Ke]===nn,or=r=>!!r&&typeof r=="object"&&r[Ke]===Gr,lr=r=>!!r&&typeof r=="object"&&r[Ke]===vt,Oe=r=>!!r&&typeof r=="object"&&r[Ke]===ta,pe=r=>!!r&&typeof r=="object"&&r[Ke]===Or,dr=r=>!!r&&typeof r=="object"&&r[Ke]===qt;function Se(r){if(r&&typeof r=="object")switch(r[Ke]){case vt:case qt:return!0}return!1}function Ce(r){if(r&&typeof r=="object")switch(r[Ke]){case nn:case vt:case Or:case qt:return!0}return!1}const ra=r=>(pe(r)||Se(r))&&!!r.anchor,bt=Symbol("break visit"),ro=Symbol("skip children"),tr=Symbol("remove node");function zt(r,e){const t=no(e);or(r)?Et(null,r.contents,t,Object.freeze([r]))===tr&&(r.contents=null):Et(null,r,t,Object.freeze([]))}zt.BREAK=bt;zt.SKIP=ro;zt.REMOVE=tr;function Et(r,e,t,n){const a=ao(r,e,t,n);if(Ce(a)||Oe(a))return io(r,n,a),Et(r,a,t,n);if(typeof a!="symbol"){if(Se(e)){n=Object.freeze(n.concat(e));for(let i=0;i<e.items.length;++i){const s=Et(i,e.items[i],t,n);if(typeof s=="number")i=s-1;else{if(s===bt)return bt;s===tr&&(e.items.splice(i,1),i-=1)}}}else if(Oe(e)){n=Object.freeze(n.concat(e));const i=Et("key",e.key,t,n);if(i===bt)return bt;i===tr&&(e.key=null);const s=Et("value",e.value,t,n);if(s===bt)return bt;s===tr&&(e.value=null)}}return a}function no(r){return typeof r=="object"&&(r.Collection||r.Node||r.Value)?Object.assign({Alias:r.Node,Map:r.Node,Scalar:r.Node,Seq:r.Node},r.Value&&{Map:r.Value,Scalar:r.Value,Seq:r.Value},r.Collection&&{Map:r.Collection,Seq:r.Collection},r):r}function ao(r,e,t,n){if(typeof t=="function")return t(r,e,n);if(lr(e))return t.Map?.(r,e,n);if(dr(e))return t.Seq?.(r,e,n);if(Oe(e))return t.Pair?.(r,e,n);if(pe(e))return t.Scalar?.(r,e,n);if(Ct(e))return t.Alias?.(r,e,n)}function io(r,e,t){const n=e[e.length-1];if(Se(n))n.items[r]=t;else if(Oe(n))r==="key"?n.key=t:n.value=t;else if(or(n))n.contents=t;else{const a=Ct(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${a} parent`)}}const so={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},oo=r=>r.replace(/[!,[\]{}]/g,e=>so[e]);class Pe{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Pe.defaultYaml,e),this.tags=Object.assign({},Pe.defaultTags,t)}clone(){const e=new Pe(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Pe(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Pe.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Pe.defaultTags);break}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:Pe.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Pe.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),a=n.shift();switch(a){case"%TAG":{if(n.length!==2&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[i,s]=n;return this.tags[i]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length!==1)return t(0,"%YAML directive should contain exactly one part"),!1;const[i]=n;if(i==="1.1"||i==="1.2")return this.yaml.version=i,!0;{const s=/^\d+\.\d+$/.test(i);return t(6,`Unsupported YAML version ${i}`,s),!1}}default:return t(0,`Unknown directive ${a}`,!0),!1}}tagName(e,t){if(e==="!")return"!";if(e[0]!=="!")return t(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const s=e.slice(2,-1);return s==="!"||s==="!!"?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&t("Verbatim tags must end with a >"),s)}const[,n,a]=e.match(/^(.*!)([^!]*)$/s);a||t(`The ${e} tag has no suffix`);const i=this.tags[n];if(i)try{return i+decodeURIComponent(a)}catch(s){return t(String(s)),null}return n==="!"?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+oo(e.substring(n.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let a;if(e&&n.length>0&&Ce(e.contents)){const i={};zt(e.contents,(s,l)=>{Ce(l)&&l.tag&&(i[l.tag]=!0)}),a=Object.keys(i)}else a=[];for(const[i,s]of n)i==="!!"&&s==="tag:yaml.org,2002:"||(!e||a.some(l=>l.startsWith(s)))&&t.push(`%TAG ${i} ${s}`);return t.join(`
`)}}Pe.defaultYaml={explicit:!1,version:"1.2"};Pe.defaultTags={"!!":"tag:yaml.org,2002:"};function na(r){if(/[\x00-\x19\s,[\]{}]/.test(r)){const t=`Anchor must not contain whitespace or control characters: ${JSON.stringify(r)}`;throw new Error(t)}return!0}function aa(r){const e=new Set;return zt(r,{Value(t,n){n.anchor&&e.add(n.anchor)}}),e}function ia(r,e){for(let t=1;;++t){const n=`${r}${t}`;if(!e.has(n))return n}}function lo(r,e){const t=[],n=new Map;let a=null;return{onAnchor:i=>{t.push(i),a??(a=aa(r));const s=ia(e,a);return a.add(s),s},setAnchors:()=>{for(const i of t){const s=n.get(i);if(typeof s=="object"&&s.anchor&&(pe(s.node)||Se(s.node)))s.node.anchor=s.anchor;else{const l=new Error("Failed to resolve repeated object (this should not happen)");throw l.source=i,l}}},sourceObjects:n}}function Mt(r,e,t,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let a=0,i=n.length;a<i;++a){const s=n[a],l=Mt(r,n,String(a),s);l===void 0?delete n[a]:l!==s&&(n[a]=l)}else if(n instanceof Map)for(const a of Array.from(n.keys())){const i=n.get(a),s=Mt(r,n,a,i);s===void 0?n.delete(a):s!==i&&n.set(a,s)}else if(n instanceof Set)for(const a of Array.from(n)){const i=Mt(r,n,a,a);i===void 0?n.delete(a):i!==a&&(n.delete(a),n.add(i))}else for(const[a,i]of Object.entries(n)){const s=Mt(r,n,a,i);s===void 0?delete n[a]:s!==i&&(n[a]=s)}return r.call(e,t,n)}function ze(r,e,t){if(Array.isArray(r))return r.map((n,a)=>ze(n,String(a),t));if(r&&typeof r.toJSON=="function"){if(!t||!ra(r))return r.toJSON(e,t);const n={aliasCount:0,count:1,res:void 0};t.anchors.set(r,n),t.onCreate=i=>{n.res=i,delete t.onCreate};const a=r.toJSON(e,t);return t.onCreate&&t.onCreate(a),a}return typeof r=="bigint"&&!t?.keep?Number(r):r}class an{constructor(e){Object.defineProperty(this,Ke,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:n,onAnchor:a,reviver:i}={}){if(!or(e))throw new TypeError("A document argument is required");const s={anchors:new Map,doc:e,keep:!0,mapAsMap:t===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},l=ze(this,"",s);if(typeof a=="function")for(const{count:d,res:u}of s.anchors.values())a(u,d);return typeof i=="function"?Mt(i,{"":l},"",l):l}}class sa extends an{constructor(e){super(nn),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,t){let n;t?.aliasResolveCache?n=t.aliasResolveCache:(n=[],zt(e,{Node:(i,s)=>{(Ct(s)||ra(s))&&n.push(s)}}),t&&(t.aliasResolveCache=n));let a;for(const i of n){if(i===this)break;i.anchor===this.source&&(a=i)}return a}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:a,maxAliasCount:i}=t,s=this.resolve(a,t);if(!s){const d=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(d)}let l=n.get(s);if(l||(ze(s,null,t),l=n.get(s)),!l||l.res===void 0){const d="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(d)}if(i>=0&&(l.count+=1,l.aliasCount===0&&(l.aliasCount=mr(a,s,n)),l.count*l.aliasCount>i)){const d="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(d)}return l.res}toString(e,t,n){const a=`*${this.source}`;if(e){if(na(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(e.implicitKey)return`${a} `}return a}}function mr(r,e,t){if(Ct(e)){const n=e.resolve(r),a=t&&n&&t.get(n);return a?a.count*a.aliasCount:0}else if(Se(e)){let n=0;for(const a of e.items){const i=mr(r,a,t);i>n&&(n=i)}return n}else if(Oe(e)){const n=mr(r,e.key,t),a=mr(r,e.value,t);return Math.max(n,a)}return 1}const oa=r=>!r||typeof r!="function"&&typeof r!="object";class ee extends an{constructor(e){super(Or),this.value=e}toJSON(e,t){return t?.keep?this.value:ze(this.value,e,t)}toString(){return String(this.value)}}ee.BLOCK_FOLDED="BLOCK_FOLDED";ee.BLOCK_LITERAL="BLOCK_LITERAL";ee.PLAIN="PLAIN";ee.QUOTE_DOUBLE="QUOTE_DOUBLE";ee.QUOTE_SINGLE="QUOTE_SINGLE";const co="tag:yaml.org,2002:";function uo(r,e,t){if(e){const n=t.filter(i=>i.tag===e),a=n.find(i=>!i.format)??n[0];if(!a)throw new Error(`Tag ${e} not found`);return a}return t.find(n=>n.identify?.(r)&&!n.format)}function sr(r,e,t){if(or(r)&&(r=r.contents),Ce(r))return r;if(Oe(r)){const m=t.schema[vt].createNode?.(t.schema,null,t);return m.items.push(r),m}(r instanceof String||r instanceof Number||r instanceof Boolean||typeof BigInt<"u"&&r instanceof BigInt)&&(r=r.valueOf());const{aliasDuplicateObjects:n,onAnchor:a,onTagObj:i,schema:s,sourceObjects:l}=t;let d;if(n&&r&&typeof r=="object"){if(d=l.get(r),d)return d.anchor??(d.anchor=a(r)),new sa(d.anchor);d={anchor:null,node:null},l.set(r,d)}e?.startsWith("!!")&&(e=co+e.slice(2));let u=uo(r,e,s.tags);if(!u){if(r&&typeof r.toJSON=="function"&&(r=r.toJSON()),!r||typeof r!="object"){const m=new ee(r);return d&&(d.node=m),m}u=r instanceof Map?s[vt]:Symbol.iterator in Object(r)?s[qt]:s[vt]}i&&(i(u),delete t.onTagObj);const y=u?.createNode?u.createNode(t.schema,r,t):typeof u?.nodeClass?.from=="function"?u.nodeClass.from(t.schema,r,t):new ee(r);return e?y.tag=e:u.default||(y.tag=u.tag),d&&(d.node=y),y}function xr(r,e,t){let n=t;for(let a=e.length-1;a>=0;--a){const i=e[a];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){const s=[];s[i]=n,n=s}else n=new Map([[i,n]])}return sr(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:r,sourceObjects:new Map})}const Zt=r=>r==null||typeof r=="object"&&!!r[Symbol.iterator]().next().done;class la extends an{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(n=>Ce(n)||Oe(n)?n.clone(e):n),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(Zt(e))this.add(t);else{const[n,...a]=e,i=this.get(n,!0);if(Se(i))i.addIn(a,t);else if(i===void 0&&this.schema)this.set(n,xr(this.schema,a,t));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${a}`)}}deleteIn(e){const[t,...n]=e;if(n.length===0)return this.delete(t);const a=this.get(t,!0);if(Se(a))return a.deleteIn(n);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...a]=e,i=this.get(n,!0);return a.length===0?!t&&pe(i)?i.value:i:Se(i)?i.getIn(a,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!Oe(t))return!1;const n=t.value;return n==null||e&&pe(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){const[t,...n]=e;if(n.length===0)return this.has(t);const a=this.get(t,!0);return Se(a)?a.hasIn(n):!1}setIn(e,t){const[n,...a]=e;if(a.length===0)this.set(n,t);else{const i=this.get(n,!0);if(Se(i))i.setIn(a,t);else if(i===void 0&&this.schema)this.set(n,xr(this.schema,a,t));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${a}`)}}}const fo=r=>r.replace(/^(?!$)(?: $)?/gm,"#");function at(r,e){return/^\n+$/.test(r)?r.substring(1):e?r.replace(/^(?! *$)/gm,e):r}const _t=(r,e,t)=>r.endsWith(`
`)?at(t,e):t.includes(`
`)?`
`+at(t,e):(r.endsWith(" ")?"":" ")+t,da="flow",Qr="block",hr="quoted";function Nr(r,e,t="flow",{indentAtStart:n,lineWidth:a=80,minContentWidth:i=20,onFold:s,onOverflow:l}={}){if(!a||a<0)return r;a<i&&(i=0);const d=Math.max(1+i,1+a-e.length);if(r.length<=d)return r;const u=[],y={};let m=a-e.length;typeof n=="number"&&(n>a-Math.max(2,i)?u.push(0):m=a-n);let h,_,k=!1,v=-1,g=-1,C=-1;t===Qr&&(v=Mn(r,v,e.length),v!==-1&&(m=v+d));for(let S;S=r[v+=1];){if(t===hr&&S==="\\"){switch(g=v,r[v+1]){case"x":v+=3;break;case"u":v+=5;break;case"U":v+=9;break;default:v+=1}C=v}if(S===`
`)t===Qr&&(v=Mn(r,v,e.length)),m=v+e.length+d,h=void 0;else{if(S===" "&&_&&_!==" "&&_!==`
`&&_!=="	"){const O=r[v+1];O&&O!==" "&&O!==`
`&&O!=="	"&&(h=v)}if(v>=m)if(h)u.push(h),m=h+d,h=void 0;else if(t===hr){for(;_===" "||_==="	";)_=S,S=r[v+=1],k=!0;const O=v>C+1?v-2:g-1;if(y[O])return r;u.push(O),y[O]=!0,m=O+d,h=void 0}else k=!0}_=S}if(k&&l&&l(),u.length===0)return r;s&&s();let M=r.slice(0,u[0]);for(let S=0;S<u.length;++S){const O=u[S],b=u[S+1]||r.length;O===0?M=`
${e}${r.slice(0,b)}`:(t===hr&&y[O]&&(M+=`${r[O]}\\`),M+=`
${e}${r.slice(O+1,b)}`)}return M}function Mn(r,e,t){let n=e,a=e+1,i=r[a];for(;i===" "||i==="	";)if(e<a+t)i=r[++e];else{do i=r[++e];while(i&&i!==`
`);n=e,a=e+1,i=r[a]}return n}const Er=(r,e)=>({indentAtStart:e?r.indent.length:r.indentAtStart,lineWidth:r.options.lineWidth,minContentWidth:r.options.minContentWidth}),Mr=r=>/^(%|---|\.\.\.)/m.test(r);function go(r,e,t){if(!e||e<0)return!1;const n=e-t,a=r.length;if(a<=n)return!1;for(let i=0,s=0;i<a;++i)if(r[i]===`
`){if(i-s>n)return!0;if(s=i+1,a-s<=n)return!1}return!0}function rr(r,e){const t=JSON.stringify(r);if(e.options.doubleQuotedAsJSON)return t;const{implicitKey:n}=e,a=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(Mr(r)?"  ":"");let s="",l=0;for(let d=0,u=t[d];u;u=t[++d])if(u===" "&&t[d+1]==="\\"&&t[d+2]==="n"&&(s+=t.slice(l,d)+"\\ ",d+=1,l=d,u="\\"),u==="\\")switch(t[d+1]){case"u":{s+=t.slice(l,d);const y=t.substr(d+2,4);switch(y){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:y.substr(0,2)==="00"?s+="\\x"+y.substr(2):s+=t.substr(d,6)}d+=5,l=d+1}break;case"n":if(n||t[d+2]==='"'||t.length<a)d+=1;else{for(s+=t.slice(l,d)+`

`;t[d+2]==="\\"&&t[d+3]==="n"&&t[d+4]!=='"';)s+=`
`,d+=2;s+=i,t[d+2]===" "&&(s+="\\"),d+=1,l=d+1}break;default:d+=1}return s=l?s+t.slice(l):t,n?s:Nr(s,i,hr,Er(e,!1))}function Zr(r,e){if(e.options.singleQuote===!1||e.implicitKey&&r.includes(`
`)||/[ \t]\n|\n[ \t]/.test(r))return rr(r,e);const t=e.indent||(Mr(r)?"  ":""),n="'"+r.replace(/'/g,"''").replace(/\n+/g,`$&
${t}`)+"'";return e.implicitKey?n:Nr(n,t,da,Er(e,!1))}function jt(r,e){const{singleQuote:t}=e.options;let n;if(t===!1)n=rr;else{const a=r.includes('"'),i=r.includes("'");a&&!i?n=Zr:i&&!a?n=rr:n=t?Zr:rr}return n(r,e)}let Xr;try{Xr=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Xr=/\n+(?!\n|$)/g}function pr({comment:r,type:e,value:t},n,a,i){const{blockQuote:s,commentString:l,lineWidth:d}=n.options;if(!s||/\n[\t ]+$/.test(t)||/^\s*$/.test(t))return jt(t,n);const u=n.indent||(n.forceBlockIndent||Mr(t)?"  ":""),y=s==="literal"?!0:s==="folded"||e===ee.BLOCK_FOLDED?!1:e===ee.BLOCK_LITERAL?!0:!go(t,d,u.length);if(!t)return y?`|
`:`>
`;let m,h;for(h=t.length;h>0;--h){const b=t[h-1];if(b!==`
`&&b!=="	"&&b!==" ")break}let _=t.substring(h);const k=_.indexOf(`
`);k===-1?m="-":t===_||k!==_.length-1?(m="+",i&&i()):m="",_&&(t=t.slice(0,-_.length),_[_.length-1]===`
`&&(_=_.slice(0,-1)),_=_.replace(Xr,`$&${u}`));let v=!1,g,C=-1;for(g=0;g<t.length;++g){const b=t[g];if(b===" ")v=!0;else if(b===`
`)C=g;else break}let M=t.substring(0,C<g?C+1:g);M&&(t=t.substring(M.length),M=M.replace(/\n+/g,`$&${u}`));let O=(v?u?"2":"1":"")+m;if(r&&(O+=" "+l(r.replace(/ ?[\r\n]+/g," ")),a&&a()),!y){const b=t.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${u}`);let p=!1;const x=Er(n,!0);s!=="folded"&&e!==ee.BLOCK_FOLDED&&(x.onOverflow=()=>{p=!0});const N=Nr(`${M}${b}${_}`,u,Qr,x);if(!p)return`>${O}
${u}${N}`}return t=t.replace(/\n+/g,`$&${u}`),`|${O}
${u}${M}${t}${_}`}function vo(r,e,t,n){const{type:a,value:i}=r,{actualString:s,implicitKey:l,indent:d,indentStep:u,inFlow:y}=e;if(l&&i.includes(`
`)||y&&/[[\]{},]/.test(i))return jt(i,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return l||y||!i.includes(`
`)?jt(i,e):pr(r,e,t,n);if(!l&&!y&&a!==ee.PLAIN&&i.includes(`
`))return pr(r,e,t,n);if(Mr(i)){if(d==="")return e.forceBlockIndent=!0,pr(r,e,t,n);if(l&&d===u)return jt(i,e)}const m=i.replace(/\n+/g,`$&
${d}`);if(s){const h=v=>v.default&&v.tag!=="tag:yaml.org,2002:str"&&v.test?.test(m),{compat:_,tags:k}=e.doc.schema;if(k.some(h)||_?.some(h))return jt(i,e)}return l?m:Nr(m,d,da,Er(e,!1))}function sn(r,e,t,n){const{implicitKey:a,inFlow:i}=e,s=typeof r.value=="string"?r:Object.assign({},r,{value:String(r.value)});let{type:l}=r;l!==ee.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(l=ee.QUOTE_DOUBLE);const d=y=>{switch(y){case ee.BLOCK_FOLDED:case ee.BLOCK_LITERAL:return a||i?jt(s.value,e):pr(s,e,t,n);case ee.QUOTE_DOUBLE:return rr(s.value,e);case ee.QUOTE_SINGLE:return Zr(s.value,e);case ee.PLAIN:return vo(s,e,t,n);default:return null}};let u=d(l);if(u===null){const{defaultKeyType:y,defaultStringType:m}=e.options,h=a&&y||m;if(u=d(h),u===null)throw new Error(`Unsupported default string type ${h}`)}return u}function ca(r,e){const t=Object.assign({blockQuote:!0,commentString:fo,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},r.schema.toStringOptions,e);let n;switch(t.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:r,flowCollectionPadding:t.flowCollectionPadding?" ":"",indent:"",indentStep:typeof t.indent=="number"?" ".repeat(t.indent):"  ",inFlow:n,options:t}}function mo(r,e){if(e.tag){const a=r.filter(i=>i.tag===e.tag);if(a.length>0)return a.find(i=>i.format===e.format)??a[0]}let t,n;if(pe(e)){n=e.value;let a=r.filter(i=>i.identify?.(n));if(a.length>1){const i=a.filter(s=>s.test);i.length>0&&(a=i)}t=a.find(i=>i.format===e.format)??a.find(i=>!i.format)}else n=e,t=r.find(a=>a.nodeClass&&n instanceof a.nodeClass);if(!t){const a=n?.constructor?.name??(n===null?"null":typeof n);throw new Error(`Tag not resolved for ${a} value`)}return t}function ho(r,e,{anchors:t,doc:n}){if(!n.directives)return"";const a=[],i=(pe(r)||Se(r))&&r.anchor;i&&na(i)&&(t.add(i),a.push(`&${i}`));const s=r.tag??(e.default?null:e.tag);return s&&a.push(n.directives.tagString(s)),a.join(" ")}function Bt(r,e,t,n){if(Oe(r))return r.toString(e,t,n);if(Ct(r)){if(e.doc.directives)return r.toString(e);if(e.resolvedAliases?.has(r))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(r):e.resolvedAliases=new Set([r]),r=r.resolve(e.doc)}let a;const i=Ce(r)?r:e.doc.createNode(r,{onTagObj:d=>a=d});a??(a=mo(e.doc.schema.tags,i));const s=ho(i,a,e);s.length>0&&(e.indentAtStart=(e.indentAtStart??0)+s.length+1);const l=typeof a.stringify=="function"?a.stringify(i,e,t,n):pe(i)?sn(i,e,t,n):i.toString(e,t,n);return s?pe(i)||l[0]==="{"||l[0]==="["?`${s} ${l}`:`${s}
${e.indent}${l}`:l}function po({key:r,value:e},t,n,a){const{allNullValues:i,doc:s,indent:l,indentStep:d,options:{commentString:u,indentSeq:y,simpleKeys:m}}=t;let h=Ce(r)&&r.comment||null;if(m){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(Se(r)||!Ce(r)&&typeof r=="object"){const x="With simple keys, collection cannot be used as a key value";throw new Error(x)}}let _=!m&&(!r||h&&e==null&&!t.inFlow||Se(r)||(pe(r)?r.type===ee.BLOCK_FOLDED||r.type===ee.BLOCK_LITERAL:typeof r=="object"));t=Object.assign({},t,{allNullValues:!1,implicitKey:!_&&(m||!i),indent:l+d});let k=!1,v=!1,g=Bt(r,t,()=>k=!0,()=>v=!0);if(!_&&!t.inFlow&&g.length>1024){if(m)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");_=!0}if(t.inFlow){if(i||e==null)return k&&n&&n(),g===""?"?":_?`? ${g}`:g}else if(i&&!m||e==null&&_)return g=`? ${g}`,h&&!k?g+=_t(g,t.indent,u(h)):v&&a&&a(),g;k&&(h=null),_?(h&&(g+=_t(g,t.indent,u(h))),g=`? ${g}
${l}:`):(g=`${g}:`,h&&(g+=_t(g,t.indent,u(h))));let C,M,S;Ce(e)?(C=!!e.spaceBefore,M=e.commentBefore,S=e.comment):(C=!1,M=null,S=null,e&&typeof e=="object"&&(e=s.createNode(e))),t.implicitKey=!1,!_&&!h&&pe(e)&&(t.indentAtStart=g.length+1),v=!1,!y&&d.length>=2&&!t.inFlow&&!_&&dr(e)&&!e.flow&&!e.tag&&!e.anchor&&(t.indent=t.indent.substring(2));let O=!1;const b=Bt(e,t,()=>O=!0,()=>v=!0);let p=" ";if(h||C||M){if(p=C?`
`:"",M){const x=u(M);p+=`
${at(x,t.indent)}`}b===""&&!t.inFlow?p===`
`&&(p=`

`):p+=`
${t.indent}`}else if(!_&&Se(e)){const x=b[0],N=b.indexOf(`
`),F=N!==-1,I=t.inFlow??e.flow??e.items.length===0;if(F||!I){let D=!1;if(F&&(x==="&"||x==="!")){let z=b.indexOf(" ");x==="&"&&z!==-1&&z<N&&b[z+1]==="!"&&(z=b.indexOf(" ",z+1)),(z===-1||N<z)&&(D=!0)}D||(p=`
${t.indent}`)}}else(b===""||b[0]===`
`)&&(p="");return g+=p+b,t.inFlow?O&&n&&n():S&&!O?g+=_t(g,t.indent,u(S)):v&&a&&a(),g}function yo(r,e){(r==="debug"||r==="warn")&&console.warn(e)}const ur="<<",it={identify:r=>r===ur||typeof r=="symbol"&&r.description===ur,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new ee(Symbol(ur)),{addToJSMap:ua}),stringify:()=>ur},bo=(r,e)=>(it.identify(e)||pe(e)&&(!e.type||e.type===ee.PLAIN)&&it.identify(e.value))&&r?.doc.schema.tags.some(t=>t.tag===it.tag&&t.default);function ua(r,e,t){if(t=r&&Ct(t)?t.resolve(r.doc):t,dr(t))for(const n of t.items)Hr(r,e,n);else if(Array.isArray(t))for(const n of t)Hr(r,e,n);else Hr(r,e,t)}function Hr(r,e,t){const n=r&&Ct(t)?t.resolve(r.doc):t;if(!lr(n))throw new Error("Merge sources must be maps or map aliases");const a=n.toJSON(null,r,Map);for(const[i,s]of a)e instanceof Map?e.has(i)||e.set(i,s):e instanceof Set?e.add(i):Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function fa(r,e,{key:t,value:n}){if(Ce(t)&&t.addToJSMap)t.addToJSMap(r,e,n);else if(bo(r,t))ua(r,e,n);else{const a=ze(t,"",r);if(e instanceof Map)e.set(a,ze(n,a,r));else if(e instanceof Set)e.add(a);else{const i=xo(t,a,r),s=ze(n,i,r);i in e?Object.defineProperty(e,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[i]=s}}return e}function xo(r,e,t){if(e===null)return"";if(typeof e!="object")return String(e);if(Ce(r)&&t?.doc){const n=ca(t.doc,{});n.anchors=new Set;for(const i of t.anchors.keys())n.anchors.add(i.anchor);n.inFlow=!0,n.inStringifyKey=!0;const a=r.toString(n);if(!t.mapKeyWarned){let i=JSON.stringify(a);i.length>40&&(i=i.substring(0,36)+'..."'),yo(t.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),t.mapKeyWarned=!0}return a}return JSON.stringify(e)}function on(r,e,t){const n=sr(r,void 0,t),a=sr(e,void 0,t);return new He(n,a)}class He{constructor(e,t=null){Object.defineProperty(this,Ke,{value:ta}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return Ce(t)&&(t=t.clone(e)),Ce(n)&&(n=n.clone(e)),new He(t,n)}toJSON(e,t){const n=t?.mapAsMap?new Map:{};return fa(t,n,this)}toString(e,t,n){return e?.doc?po(this,e,t,n):JSON.stringify(this)}}function ga(r,e,t){return(e.inFlow??r.flow?wo:_o)(r,e,t)}function _o({comment:r,items:e},t,{blockItemPrefix:n,flowChars:a,itemIndent:i,onChompKeep:s,onComment:l}){const{indent:d,options:{commentString:u}}=t,y=Object.assign({},t,{indent:i,type:null});let m=!1;const h=[];for(let k=0;k<e.length;++k){const v=e[k];let g=null;if(Ce(v))!m&&v.spaceBefore&&h.push(""),_r(t,h,v.commentBefore,m),v.comment&&(g=v.comment);else if(Oe(v)){const M=Ce(v.key)?v.key:null;M&&(!m&&M.spaceBefore&&h.push(""),_r(t,h,M.commentBefore,m))}m=!1;let C=Bt(v,y,()=>g=null,()=>m=!0);g&&(C+=_t(C,i,u(g))),m&&g&&(m=!1),h.push(n+C)}let _;if(h.length===0)_=a.start+a.end;else{_=h[0];for(let k=1;k<h.length;++k){const v=h[k];_+=v?`
${d}${v}`:`
`}}return r?(_+=`
`+at(u(r),d),l&&l()):m&&s&&s(),_}function wo({items:r},e,{flowChars:t,itemIndent:n}){const{indent:a,indentStep:i,flowCollectionPadding:s,options:{commentString:l}}=e;n+=i;const d=Object.assign({},e,{indent:n,inFlow:!0,type:null});let u=!1,y=0;const m=[];for(let k=0;k<r.length;++k){const v=r[k];let g=null;if(Ce(v))v.spaceBefore&&m.push(""),_r(e,m,v.commentBefore,!1),v.comment&&(g=v.comment);else if(Oe(v)){const M=Ce(v.key)?v.key:null;M&&(M.spaceBefore&&m.push(""),_r(e,m,M.commentBefore,!1),M.comment&&(u=!0));const S=Ce(v.value)?v.value:null;S?(S.comment&&(g=S.comment),S.commentBefore&&(u=!0)):v.value==null&&M?.comment&&(g=M.comment)}g&&(u=!0);let C=Bt(v,d,()=>g=null);k<r.length-1&&(C+=","),g&&(C+=_t(C,n,l(g))),!u&&(m.length>y||C.includes(`
`))&&(u=!0),m.push(C),y=m.length}const{start:h,end:_}=t;if(m.length===0)return h+_;if(!u){const k=m.reduce((v,g)=>v+g.length+2,2);u=e.options.lineWidth>0&&k>e.options.lineWidth}if(u){let k=h;for(const v of m)k+=v?`
${i}${a}${v}`:`
`;return`${k}
${a}${_}`}else return`${h}${s}${m.join(" ")}${s}${_}`}function _r({indent:r,options:{commentString:e}},t,n,a){if(n&&a&&(n=n.replace(/^\n+/,"")),n){const i=at(e(n),r);t.push(i.trimStart())}}function wt(r,e){const t=pe(e)?e.value:e;for(const n of r)if(Oe(n)&&(n.key===e||n.key===t||pe(n.key)&&n.key.value===t))return n}class ut extends la{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(vt,e),this.items=[]}static from(e,t,n){const{keepUndefined:a,replacer:i}=n,s=new this(e),l=(d,u)=>{if(typeof i=="function")u=i.call(t,d,u);else if(Array.isArray(i)&&!i.includes(d))return;(u!==void 0||a)&&s.items.push(on(d,u,n))};if(t instanceof Map)for(const[d,u]of t)l(d,u);else if(t&&typeof t=="object")for(const d of Object.keys(t))l(d,t[d]);return typeof e.sortMapEntries=="function"&&s.items.sort(e.sortMapEntries),s}add(e,t){let n;Oe(e)?n=e:!e||typeof e!="object"||!("key"in e)?n=new He(e,e?.value):n=new He(e.key,e.value);const a=wt(this.items,n.key),i=this.schema?.sortMapEntries;if(a){if(!t)throw new Error(`Key ${n.key} already set`);pe(a.value)&&oa(n.value)?a.value.value=n.value:a.value=n.value}else if(i){const s=this.items.findIndex(l=>i(n,l)<0);s===-1?this.items.push(n):this.items.splice(s,0,n)}else this.items.push(n)}delete(e){const t=wt(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){const a=wt(this.items,e)?.value;return(!t&&pe(a)?a.value:a)??void 0}has(e){return!!wt(this.items,e)}set(e,t){this.add(new He(e,t),!0)}toJSON(e,t,n){const a=n?new n:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(a);for(const i of this.items)fa(t,a,i);return a}toString(e,t,n){if(!e)return JSON.stringify(this);for(const a of this.items)if(!Oe(a))throw new Error(`Map items must all be pairs; found ${JSON.stringify(a)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),ga(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const Ht={collection:"map",default:!0,nodeClass:ut,tag:"tag:yaml.org,2002:map",resolve(r,e){return lr(r)||e("Expected a mapping for this tag"),r},createNode:(r,e,t)=>ut.from(r,e,t)};class wr extends la{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(qt,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=fr(e);return typeof t!="number"?!1:this.items.splice(t,1).length>0}get(e,t){const n=fr(e);if(typeof n!="number")return;const a=this.items[n];return!t&&pe(a)?a.value:a}has(e){const t=fr(e);return typeof t=="number"&&t<this.items.length}set(e,t){const n=fr(e);if(typeof n!="number")throw new Error(`Expected a valid index, not ${e}.`);const a=this.items[n];pe(a)&&oa(t)?a.value=t:this.items[n]=t}toJSON(e,t){const n=[];t?.onCreate&&t.onCreate(n);let a=0;for(const i of this.items)n.push(ze(i,String(a++),t));return n}toString(e,t,n){return e?ga(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}static from(e,t,n){const{replacer:a}=n,i=new this(e);if(t&&Symbol.iterator in Object(t)){let s=0;for(let l of t){if(typeof a=="function"){const d=t instanceof Set?l:String(s++);l=a.call(t,d,l)}i.items.push(sr(l,void 0,n))}}return i}}function fr(r){let e=pe(r)?r.value:r;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Rt={collection:"seq",default:!0,nodeClass:wr,tag:"tag:yaml.org,2002:seq",resolve(r,e){return dr(r)||e("Expected a sequence for this tag"),r},createNode:(r,e,t)=>wr.from(r,e,t)},jr={identify:r=>typeof r=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:r=>r,stringify(r,e,t,n){return e=Object.assign({actualString:!0},e),sn(r,e,t,n)}},Lr={identify:r=>r==null,createNode:()=>new ee(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ee(null),stringify:({source:r},e)=>typeof r=="string"&&Lr.test.test(r)?r:e.options.nullStr},ln={identify:r=>typeof r=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:r=>new ee(r[0]==="t"||r[0]==="T"),stringify({source:r,value:e},t){if(r&&ln.test.test(r)){const n=r[0]==="t"||r[0]==="T";if(e===n)return r}return e?t.options.trueStr:t.options.falseStr}};function Ye({format:r,minFractionDigits:e,tag:t,value:n}){if(typeof n=="bigint")return String(n);const a=typeof n=="number"?n:Number(n);if(!isFinite(a))return isNaN(a)?".nan":a<0?"-.inf":".inf";let i=JSON.stringify(n);if(!r&&e&&(!t||t==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let s=i.indexOf(".");s<0&&(s=i.length,i+=".");let l=e-(i.length-s-1);for(;l-- >0;)i+="0"}return i}const va={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:r=>r.slice(-3).toLowerCase()==="nan"?NaN:r[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ye},ma={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:r=>parseFloat(r),stringify(r){const e=Number(r.value);return isFinite(e)?e.toExponential():Ye(r)}},ha={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(r){const e=new ee(parseFloat(r)),t=r.indexOf(".");return t!==-1&&r[r.length-1]==="0"&&(e.minFractionDigits=r.length-t-1),e},stringify:Ye},Ir=r=>typeof r=="bigint"||Number.isInteger(r),dn=(r,e,t,{intAsBigInt:n})=>n?BigInt(r):parseInt(r.substring(e),t);function pa(r,e,t){const{value:n}=r;return Ir(n)&&n>=0?t+n.toString(e):Ye(r)}const ya={identify:r=>Ir(r)&&r>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(r,e,t)=>dn(r,2,8,t),stringify:r=>pa(r,8,"0o")},ba={identify:Ir,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(r,e,t)=>dn(r,0,10,t),stringify:Ye},xa={identify:r=>Ir(r)&&r>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(r,e,t)=>dn(r,2,16,t),stringify:r=>pa(r,16,"0x")},ko=[Ht,Rt,jr,Lr,ln,ya,ba,xa,va,ma,ha];function jn(r){return typeof r=="bigint"||Number.isInteger(r)}const gr=({value:r})=>JSON.stringify(r),So=[{identify:r=>typeof r=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:r=>r,stringify:gr},{identify:r=>r==null,createNode:()=>new ee(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:gr},{identify:r=>typeof r=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:r=>r==="true",stringify:gr},{identify:jn,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(r,e,{intAsBigInt:t})=>t?BigInt(r):parseInt(r,10),stringify:({value:r})=>jn(r)?r.toString():JSON.stringify(r)},{identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:r=>parseFloat(r),stringify:gr}],Co={default:!0,tag:"",test:/^/,resolve(r,e){return e(`Unresolved plain scalar ${JSON.stringify(r)}`),r}},Ao=[Ht,Rt].concat(So,Co),cn={identify:r=>r instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(r,e){if(typeof atob=="function"){const t=atob(r.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let a=0;a<t.length;++a)n[a]=t.charCodeAt(a);return n}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),r},stringify({comment:r,type:e,value:t},n,a,i){if(!t)return"";const s=t;let l;if(typeof btoa=="function"){let d="";for(let u=0;u<s.length;++u)d+=String.fromCharCode(s[u]);l=btoa(d)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=ee.BLOCK_LITERAL),e!==ee.QUOTE_DOUBLE){const d=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),u=Math.ceil(l.length/d),y=new Array(u);for(let m=0,h=0;m<u;++m,h+=d)y[m]=l.substr(h,d);l=y.join(e===ee.BLOCK_LITERAL?`
`:" ")}return sn({comment:r,type:e,value:l},n,a,i)}};function _a(r,e){if(dr(r))for(let t=0;t<r.items.length;++t){let n=r.items[t];if(!Oe(n)){if(lr(n)){n.items.length>1&&e("Each pair must have its own sequence indicator");const a=n.items[0]||new He(new ee(null));if(n.commentBefore&&(a.key.commentBefore=a.key.commentBefore?`${n.commentBefore}
${a.key.commentBefore}`:n.commentBefore),n.comment){const i=a.value??a.key;i.comment=i.comment?`${n.comment}
${i.comment}`:n.comment}n=a}r.items[t]=Oe(n)?n:new He(n)}}else e("Expected a sequence for this tag");return r}function wa(r,e,t){const{replacer:n}=t,a=new wr(r);a.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof n=="function"&&(s=n.call(e,String(i++),s));let l,d;if(Array.isArray(s))if(s.length===2)l=s[0],d=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){const u=Object.keys(s);if(u.length===1)l=u[0],d=s[l];else throw new TypeError(`Expected tuple with one key, not ${u.length} keys`)}else l=s;a.items.push(on(l,d,t))}return a}const un={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:_a,createNode:wa};class Tt extends wr{constructor(){super(),this.add=ut.prototype.add.bind(this),this.delete=ut.prototype.delete.bind(this),this.get=ut.prototype.get.bind(this),this.has=ut.prototype.has.bind(this),this.set=ut.prototype.set.bind(this),this.tag=Tt.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t?.onCreate&&t.onCreate(n);for(const a of this.items){let i,s;if(Oe(a)?(i=ze(a.key,"",t),s=ze(a.value,i,t)):i=ze(a,"",t),n.has(i))throw new Error("Ordered maps must not include duplicate keys");n.set(i,s)}return n}static from(e,t,n){const a=wa(e,t,n),i=new this;return i.items=a.items,i}}Tt.tag="tag:yaml.org,2002:omap";const fn={collection:"seq",identify:r=>r instanceof Map,nodeClass:Tt,default:!1,tag:"tag:yaml.org,2002:omap",resolve(r,e){const t=_a(r,e),n=[];for(const{key:a}of t.items)pe(a)&&(n.includes(a.value)?e(`Ordered maps must not include duplicate keys: ${a.value}`):n.push(a.value));return Object.assign(new Tt,t)},createNode:(r,e,t)=>Tt.from(r,e,t)};function ka({value:r,source:e},t){return e&&(r?Sa:Ca).test.test(e)?e:r?t.options.trueStr:t.options.falseStr}const Sa={identify:r=>r===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new ee(!0),stringify:ka},Ca={identify:r=>r===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new ee(!1),stringify:ka},Oo={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:r=>r.slice(-3).toLowerCase()==="nan"?NaN:r[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ye},No={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:r=>parseFloat(r.replace(/_/g,"")),stringify(r){const e=Number(r.value);return isFinite(e)?e.toExponential():Ye(r)}},Eo={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(r){const e=new ee(parseFloat(r.replace(/_/g,""))),t=r.indexOf(".");if(t!==-1){const n=r.substring(t+1).replace(/_/g,"");n[n.length-1]==="0"&&(e.minFractionDigits=n.length)}return e},stringify:Ye},cr=r=>typeof r=="bigint"||Number.isInteger(r);function Tr(r,e,t,{intAsBigInt:n}){const a=r[0];if((a==="-"||a==="+")&&(e+=1),r=r.substring(e).replace(/_/g,""),n){switch(t){case 2:r=`0b${r}`;break;case 8:r=`0o${r}`;break;case 16:r=`0x${r}`;break}const s=BigInt(r);return a==="-"?BigInt(-1)*s:s}const i=parseInt(r,t);return a==="-"?-1*i:i}function gn(r,e,t){const{value:n}=r;if(cr(n)){const a=n.toString(e);return n<0?"-"+t+a.substr(1):t+a}return Ye(r)}const Mo={identify:cr,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(r,e,t)=>Tr(r,2,2,t),stringify:r=>gn(r,2,"0b")},jo={identify:cr,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(r,e,t)=>Tr(r,1,8,t),stringify:r=>gn(r,8,"0")},Lo={identify:cr,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(r,e,t)=>Tr(r,0,10,t),stringify:Ye},Io={identify:cr,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(r,e,t)=>Tr(r,2,16,t),stringify:r=>gn(r,16,"0x")};class Dt extends ut{constructor(e){super(e),this.tag=Dt.tag}add(e){let t;Oe(e)?t=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?t=new He(e.key,null):t=new He(e,null),wt(this.items,t.key)||this.items.push(t)}get(e,t){const n=wt(this.items,e);return!t&&Oe(n)?pe(n.key)?n.key.value:n.key:n}set(e,t){if(typeof t!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);const n=wt(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new He(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}static from(e,t,n){const{replacer:a}=n,i=new this(e);if(t&&Symbol.iterator in Object(t))for(let s of t)typeof a=="function"&&(s=a.call(t,s,s)),i.items.push(on(s,null,n));return i}}Dt.tag="tag:yaml.org,2002:set";const vn={collection:"map",identify:r=>r instanceof Set,nodeClass:Dt,default:!1,tag:"tag:yaml.org,2002:set",createNode:(r,e,t)=>Dt.from(r,e,t),resolve(r,e){if(lr(r)){if(r.hasAllNullValues(!0))return Object.assign(new Dt,r);e("Set items must all have null values")}else e("Expected a mapping for this tag");return r}};function mn(r,e){const t=r[0],n=t==="-"||t==="+"?r.substring(1):r,a=s=>e?BigInt(s):Number(s),i=n.replace(/_/g,"").split(":").reduce((s,l)=>s*a(60)+a(l),a(0));return t==="-"?a(-1)*i:i}function Aa(r){let{value:e}=r,t=s=>s;if(typeof e=="bigint")t=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return Ye(r);let n="";e<0&&(n="-",e*=t(-1));const a=t(60),i=[e%a];return e<60?i.unshift(0):(e=(e-i[0])/a,i.unshift(e%a),e>=60&&(e=(e-i[0])/a,i.unshift(e))),n+i.map(s=>String(s).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const Oa={identify:r=>typeof r=="bigint"||Number.isInteger(r),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(r,e,{intAsBigInt:t})=>mn(r,t),stringify:Aa},Na={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:r=>mn(r,!1),stringify:Aa},Dr={identify:r=>r instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(r){const e=r.match(Dr.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,t,n,a,i,s,l]=e.map(Number),d=e[7]?Number((e[7]+"00").substr(1,3)):0;let u=Date.UTC(t,n-1,a,i||0,s||0,l||0,d);const y=e[8];if(y&&y!=="Z"){let m=mn(y,!1);Math.abs(m)<30&&(m*=60),u-=6e4*m}return new Date(u)},stringify:({value:r})=>r?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},Ln=[Ht,Rt,jr,Lr,Sa,Ca,Mo,jo,Lo,Io,Oo,No,Eo,cn,it,fn,un,vn,Oa,Na,Dr],In=new Map([["core",ko],["failsafe",[Ht,Rt,jr]],["json",Ao],["yaml11",Ln],["yaml-1.1",Ln]]),Tn={binary:cn,bool:ln,float:ha,floatExp:ma,floatNaN:va,floatTime:Na,int:ba,intHex:xa,intOct:ya,intTime:Oa,map:Ht,merge:it,null:Lr,omap:fn,pairs:un,seq:Rt,set:vn,timestamp:Dr},To={"tag:yaml.org,2002:binary":cn,"tag:yaml.org,2002:merge":it,"tag:yaml.org,2002:omap":fn,"tag:yaml.org,2002:pairs":un,"tag:yaml.org,2002:set":vn,"tag:yaml.org,2002:timestamp":Dr};function Rr(r,e,t){const n=In.get(e);if(n&&!r)return t&&!n.includes(it)?n.concat(it):n.slice();let a=n;if(!a)if(Array.isArray(r))a=[];else{const i=Array.from(In.keys()).filter(s=>s!=="yaml11").map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${i} or define customTags array`)}if(Array.isArray(r))for(const i of r)a=a.concat(i);else typeof r=="function"&&(a=r(a.slice()));return t&&(a=a.concat(it)),a.reduce((i,s)=>{const l=typeof s=="string"?Tn[s]:s;if(!l){const d=JSON.stringify(s),u=Object.keys(Tn).map(y=>JSON.stringify(y)).join(", ");throw new Error(`Unknown custom tag ${d}; use one of ${u}`)}return i.includes(l)||i.push(l),i},[])}const Do=(r,e)=>r.key<e.key?-1:r.key>e.key?1:0;class hn{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:a,schema:i,sortMapEntries:s,toStringDefaults:l}){this.compat=Array.isArray(e)?Rr(e,"compat"):e?Rr(null,e):null,this.name=typeof i=="string"&&i||"core",this.knownTags=a?To:{},this.tags=Rr(t,this.name,n),this.toStringOptions=l??null,Object.defineProperty(this,vt,{value:Ht}),Object.defineProperty(this,Or,{value:jr}),Object.defineProperty(this,qt,{value:Rt}),this.sortMapEntries=typeof s=="function"?s:s===!0?Do:null}clone(){const e=Object.create(hn.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function Fo(r,e){const t=[];let n=e.directives===!0;if(e.directives!==!1&&r.directives){const d=r.directives.toString(r);d?(t.push(d),n=!0):r.directives.docStart&&(n=!0)}n&&t.push("---");const a=ca(r,e),{commentString:i}=a.options;if(r.commentBefore){t.length!==1&&t.unshift("");const d=i(r.commentBefore);t.unshift(at(d,""))}let s=!1,l=null;if(r.contents){if(Ce(r.contents)){if(r.contents.spaceBefore&&n&&t.push(""),r.contents.commentBefore){const y=i(r.contents.commentBefore);t.push(at(y,""))}a.forceBlockIndent=!!r.comment,l=r.contents.comment}const d=l?void 0:()=>s=!0;let u=Bt(r.contents,a,()=>l=null,d);l&&(u+=_t(u,"",i(l))),(u[0]==="|"||u[0]===">")&&t[t.length-1]==="---"?t[t.length-1]=`--- ${u}`:t.push(u)}else t.push(Bt(r.contents,a));if(r.directives?.docEnd)if(r.comment){const d=i(r.comment);d.includes(`
`)?(t.push("..."),t.push(at(d,""))):t.push(`... ${d}`)}else t.push("...");else{let d=r.comment;d&&s&&(d=d.replace(/^\n+/,"")),d&&((!s||l)&&t[t.length-1]!==""&&t.push(""),t.push(at(i(d),"")))}return t.join(`
`)+`
`}let Po=class Ea{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Ke,{value:Gr});let a=null;typeof t=="function"||Array.isArray(t)?a=t:n===void 0&&t&&(n=t,t=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},n);this.options=i;let{version:s}=i;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new Pe({version:s}),this.setSchema(s,n),this.contents=e===void 0?null:this.createNode(e,a,n)}clone(){const e=Object.create(Ea.prototype,{[Ke]:{value:Gr}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=Ce(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){At(this.contents)&&this.contents.add(e)}addIn(e,t){At(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=aa(this);e.anchor=!t||n.has(t)?ia(t||"a",n):t}return new sa(e.anchor)}createNode(e,t,n){let a;if(typeof t=="function")e=t.call({"":e},"",e),a=t;else if(Array.isArray(t)){const g=M=>typeof M=="number"||M instanceof String||M instanceof Number,C=t.filter(g).map(String);C.length>0&&(t=t.concat(C)),a=t}else n===void 0&&t&&(n=t,t=void 0);const{aliasDuplicateObjects:i,anchorPrefix:s,flow:l,keepUndefined:d,onTagObj:u,tag:y}=n??{},{onAnchor:m,setAnchors:h,sourceObjects:_}=lo(this,s||"a"),k={aliasDuplicateObjects:i??!0,keepUndefined:d??!1,onAnchor:m,onTagObj:u,replacer:a,schema:this.schema,sourceObjects:_},v=sr(e,y,k);return l&&Se(v)&&(v.flow=!0),h(),v}createPair(e,t,n={}){const a=this.createNode(e,null,n),i=this.createNode(t,null,n);return new He(a,i)}delete(e){return At(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Zt(e)?this.contents==null?!1:(this.contents=null,!0):At(this.contents)?this.contents.deleteIn(e):!1}get(e,t){return Se(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return Zt(e)?!t&&pe(this.contents)?this.contents.value:this.contents:Se(this.contents)?this.contents.getIn(e,t):void 0}has(e){return Se(this.contents)?this.contents.has(e):!1}hasIn(e){return Zt(e)?this.contents!==void 0:Se(this.contents)?this.contents.hasIn(e):!1}set(e,t){this.contents==null?this.contents=xr(this.schema,[e],t):At(this.contents)&&this.contents.set(e,t)}setIn(e,t){Zt(e)?this.contents=t:this.contents==null?this.contents=xr(this.schema,Array.from(e),t):At(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){typeof e=="number"&&(e=String(e));let n;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Pe({version:"1.1"}),n={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Pe({version:e}),n={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const a=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${a}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(n)this.schema=new hn(Object.assign(n,t));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:a,onAnchor:i,reviver:s}={}){const l={anchors:new Map,doc:this,keep:!e,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof a=="number"?a:100},d=ze(this.contents,t??"",l);if(typeof i=="function")for(const{count:u,res:y}of l.anchors.values())i(y,u);return typeof s=="function"?Mt(s,{"":d},"",d):d}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return Fo(this,e)}};function At(r){if(Se(r))return!0;throw new Error("Expected a YAML collection as document contents")}new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);function Bo(r,e,t){let n=null;if(Array.isArray(e)&&(n=e),r===void 0){const{keepUndefined:a}={};if(!a)return}return or(r)&&!n?r.toString(t):new Po(r,n,t).toString(t)}function Xe(r){return r===null?"null":r===void 0?"undefined":typeof r=="string"?`"${r}"`:typeof r=="object"?Bo(r).trim():String(r)}var $o=(r,e)=>J(e,!o(e)),Vo=j('<button class="inline-flex items-center px-2 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"><svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> </button>'),qo=j('<div class="text-sm space-y-1"><div class="flex items-start space-x-2"><span class="text-red-600 dark:text-red-400 font-mono text-xs">-</span> <code class="text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 px-1 py-0.5 rounded text-xs"> </code></div> <div class="flex items-start space-x-2"><span class="text-green-600 dark:text-green-400 font-mono text-xs">+</span> <code class="text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900/30 px-1 py-0.5 rounded text-xs"> </code></div></div>'),zo=j('<div class="text-sm"><code class="text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900/30 px-1 py-0.5 rounded text-xs"> </code></div>'),Ho=j('<div class="text-sm"><code class="text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 px-1 py-0.5 rounded text-xs"> </code></div>'),Ro=j('<div><div class="flex items-start space-x-3"><div class="flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold"> </div> <div class="flex-1 min-w-0"><div class="flex items-center space-x-2 mb-1"><span class="text-sm font-medium text-gray-900 dark:text-white"> </span> <span class="text-xs text-gray-500 dark:text-gray-400 font-mono bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded"> </span></div> <!></div></div></div>'),Uo=j('<div class="divide-y divide-gray-200 dark:divide-gray-600"></div>'),Jo=j('<div class="flex items-center space-x-2 text-xs ml-2 mt-1"><span class="text-red-600 dark:text-red-400 font-mono">â</span> <code class="text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 px-2 py-1 rounded"><!></code></div> <div class="flex items-center space-x-2 text-xs ml-2 mt-1"><span class="text-green-600 dark:text-green-400 font-mono">+</span> <code class="text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded"><!></code></div>',1),Ko=j('<div class="flex items-center space-x-1 text-xs ml-2"><code class="text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30 px-1 py-0.5 rounded"> </code></div>'),Yo=j('<div class="flex items-center space-x-1 text-xs ml-2"><code class="text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 px-1 py-0.5 rounded"> </code></div>'),Wo=j('<div class="flex items-center space-x-2 text-sm"><span> </span> <span class="font-medium text-gray-900 dark:text-white"> </span> <!></div>'),Go=j('<div class="p-4 space-y-2"></div>'),Qo=j('<div class="p-6 text-center text-gray-500 dark:text-gray-400"><svg class="mx-auto h-8 w-8 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-sm">No changes detected</p></div>'),Zo=j('<div class="yaml-diff-viewer bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm overflow-hidden svelte-1mp4lfp"><div class="bg-gray-100 dark:bg-gray-900 px-4 py-2 border-b border-gray-200 dark:border-gray-700"><div class="flex items-center justify-between"><div class="flex items-center space-x-2"><svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg> <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Changes</span> <span class="text-xs text-gray-500 dark:text-gray-400 bg-gray-200 dark:bg-gray-700 px-2 py-0.5 rounded-full"> </span></div> <!></div></div> <div class="max-h-96 overflow-y-auto"><!></div></div>');function Xo(r,e){xe(e,!0);let t=Z(e,"showToggle",3,!0),n=ke(!1);function a(b){switch(b){case"added":return"+";case"removed":return"-";case"modified":return"~";default:return"â¢"}}function i(b){switch(b){case"added":return"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20";case"removed":return"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20";case"modified":return"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20";default:return"text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/20"}}function s(b,p){if(!b&&!p)return{oldHighlighted:"",newHighlighted:""};if(!b)return{oldHighlighted:"",newHighlighted:l(p)};if(!p)return{oldHighlighted:l(b),newHighlighted:""};const x=String(b),N=String(p),F=x.split(/(\s+)/),I=N.split(/(\s+)/);let D="",z="";const L=F.length,K=I.length,$=Array(L+1).fill(null).map(()=>Array(K+1).fill(0));for(let q=1;q<=L;q++)for(let V=1;V<=K;V++)F[q-1]===I[V-1]?$[q][V]=$[q-1][V-1]+1:$[q][V]=Math.max($[q-1][V],$[q][V-1]);let E=L,T=K;const R=[],W=[];for(;E>0||T>0;)E>0&&T>0&&F[E-1]===I[T-1]?(R.unshift({token:F[E-1],changed:!1}),W.unshift({token:I[T-1],changed:!1}),E--,T--):E>0&&(T===0||$[E-1][T]>=$[E][T-1])?(R.unshift({token:F[E-1],changed:!0}),E--):T>0&&(W.unshift({token:I[T-1],changed:!0}),T--);return D=R.map(({token:q,changed:V})=>V?`<mark class="bg-red-200 dark:bg-red-800 text-red-900 dark:text-red-100 px-0.5 rounded">${l(q)}</mark>`:l(q)).join(""),z=W.map(({token:q,changed:V})=>V?`<mark class="bg-green-200 dark:bg-green-800 text-green-900 dark:text-green-100 px-0.5 rounded">${l(q)}</mark>`:l(q)).join(""),{oldHighlighted:D,newHighlighted:z}}function l(b){const p=document.createElement("div");return p.textContent=b,p.innerHTML}function d(b,p){if(!b)return"";const x=document.createElement("div");x.innerHTML=b;const N=x.textContent||x.innerText||"";if(N.length<=p)return b;if(b.includes("<mark")){const z=/<mark[^>]*>([^<]*)<\/mark>/g,L=[];let K;for(;(K=z.exec(b))!==null;)L.push({start:K.index,end:K.index+K[0].length,text:K[1],fullMatch:K[0]});if(L.length>0){const $=L.find(ie=>ie.text.trim().length>0)||L[0],E=Math.floor((p-$.text.length)/2),T=b.substring(0,$.start),R=b.substring($.end),W=document.createElement("div");W.innerHTML=T;const q=W.textContent||"",V=document.createElement("div");V.innerHTML=R;const G=V.textContent||"",re=Math.min(q.length,E),he=Math.min(G.length,E),ye=Math.max(0,q.length-re),Ne=Math.min(G.length,he);let ne="",te="";if(ye<q.length){const ie=ye/q.length,ve=Math.floor(T.length*ie);ne="..."+T.substring(ve)}else ne=T;if(Ne<G.length){const ie=Ne/G.length,ve=Math.floor(R.length*ie);te=R.substring(0,ve)+"..."}else te=R;return ne+$.fullMatch+te}}const F=N.split(/\s+/);let I="",D=0;for(const z of F){if(D+z.length+(I?1:0)>p)break;I&&(I+=" "),I+=z,D+=z.length+(I.length>z.length?1:0)}return l(I)+(D<N.length?"...":"")}var u=Zo(),y=f(u),m=f(y),h=f(m),_=A(f(h),4),k=f(_,!0);c(_),c(h);var v=A(h,2);{var g=b=>{var p=Vo();p.__click=[$o,n];var x=A(f(p));c(p),H(()=>P(x,` ${o(n)?"Summary":"Details"}`)),w(b,p)};B(v,b=>{t()&&b(g)})}c(m),c(y);var C=A(y,2),M=f(C);{var S=b=>{var p=ge(),x=oe(p);{var N=I=>{var D=Uo();Le(D,21,()=>e.yamlDiff.changes,je,(z,L)=>{var K=Ro(),$=f(K),E=f($),T=f(E,!0);c(E);var R=A(E,2),W=f(R),q=f(W),V=f(q,!0);c(q);var G=A(q,2),re=f(G,!0);c(G),c(W);var he=A(W,2);{var ye=ne=>{var te=qo(),ie=f(te),ve=A(f(ie),2),be=f(ve,!0);c(ve),c(ie);var me=A(ie,2),we=A(f(me),2),ue=f(we,!0);c(we),c(me),c(te),H((Ee,Be)=>{P(be,Ee),P(ue,Be)},[()=>Xe(o(L).oldValue),()=>Xe(o(L).newValue)]),w(ne,te)},Ne=ne=>{var te=ge(),ie=oe(te);{var ve=me=>{var we=zo(),ue=f(we),Ee=f(ue,!0);c(ue),c(we),H(Be=>P(Ee,Be),[()=>Xe(o(L).newValue)]),w(me,we)},be=me=>{var we=ge(),ue=oe(we);{var Ee=Be=>{var fe=Ho(),Ie=f(fe),We=f(Ie,!0);c(Ie),c(fe),H(Ge=>P(We,Ge),[()=>Xe(o(L).oldValue)]),w(Be,fe)};B(ue,Be=>{o(L).type==="removed"&&Be(Ee)},!0)}w(me,we)};B(ie,me=>{o(L).type==="added"?me(ve):me(be,!1)},!0)}w(ne,te)};B(he,ne=>{o(L).type==="modified"?ne(ye):ne(Ne,!1)})}c(R),c($),c(K),H((ne,te)=>{ae(K,1,`p-3 ${ne??""}`,"svelte-1mp4lfp"),P(T,te),P(V,o(L).description),P(re,o(L).path)},[()=>i(o(L).type),()=>a(o(L).type)]),w(z,K)}),c(D),w(I,D)},F=I=>{var D=Go();Le(D,21,()=>e.yamlDiff.changes,je,(z,L)=>{var K=Wo(),$=f(K),E=f($,!0);c($);var T=A($,2),R=f(T,!0);c(T);var W=A(T,2);{var q=G=>{var re=Jo();const he=le(()=>s(Xe(o(L).oldValue),Xe(o(L).newValue))),ye=le(()=>d(o(he).oldHighlighted||l(Xe(o(L).oldValue)),80)),Ne=le(()=>d(o(he).newHighlighted||l(Xe(o(L).newValue)),80));var ne=oe(re),te=A(f(ne),2),ie=f(te);Yr(ie,()=>o(ye)),c(te),c(ne);var ve=A(ne,2),be=A(f(ve),2),me=f(be);Yr(me,()=>o(Ne)),c(be),c(ve),w(G,re)},V=G=>{var re=ge(),he=oe(re);{var ye=ne=>{var te=Ko(),ie=f(te),ve=f(ie,!0);c(ie),c(te),H(be=>P(ve,be),[()=>typeof o(L).newValue=="string"&&o(L).newValue.length>20?o(L).newValue.substring(0,20)+"...":Xe(o(L).newValue)]),w(ne,te)},Ne=ne=>{var te=ge(),ie=oe(te);{var ve=be=>{var me=Yo(),we=f(me),ue=f(we,!0);c(we),c(me),H(Ee=>P(ue,Ee),[()=>typeof o(L).oldValue=="string"&&o(L).oldValue.length>20?o(L).oldValue.substring(0,20)+"...":Xe(o(L).oldValue)]),w(be,me)};B(ie,be=>{o(L).type==="removed"&&o(L).oldValue!==void 0&&be(ve)},!0)}w(ne,te)};B(he,ne=>{o(L).type==="added"&&o(L).newValue!==void 0?ne(ye):ne(Ne,!1)},!0)}w(G,re)};B(W,G=>{o(L).type==="modified"&&o(L).oldValue!==o(L).newValue?G(q):G(V,!1)})}c(K),H((G,re)=>{ae($,1,`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold ${G??""}`,"svelte-1mp4lfp"),P(E,re),P(R,o(L).description)},[()=>i(o(L).type),()=>a(o(L).type)]),w(z,K)}),c(D),w(I,D)};B(x,I=>{o(n)?I(N):I(F,!1)})}w(b,p)},O=b=>{var p=Qo();w(b,p)};B(M,b=>{e.yamlDiff?.changes&&e.yamlDiff.changes.length>0?b(S):b(O,!1)})}c(C),c(u),H(()=>P(k,e.yamlDiff?.summary||"No changes")),w(r,u),_e()}De(["click"]);var el=j('<div class="absolute left-4 top-12 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-800"></div>'),tl=j('<div class="w-3 h-3 rounded-full bg-amber-400 animate-pulse"></div>'),rl=j('<div class="w-3 h-3 rounded-full bg-green-500"></div>'),nl=j('<div class="w-3 h-3 rounded-full bg-blue-500"></div>'),al=j('<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300">Pending</span>'),il=j('<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"> </span>'),sl=j('<div class="border-t border-gray-200 dark:border-gray-700"><!></div>'),ol=j('<div class="border-t border-gray-200 dark:border-gray-700"><!></div>'),ll=j('<div class="relative"><!> <div class="relative"><div class="absolute left-0 mt-1.5 w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 flex items-center justify-center"><!></div> <div class="ml-12 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm hover:shadow-md transition-all duration-200"><div class="px-6 py-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 rounded-t-xl"><div class="flex items-center justify-between"><div class="flex items-center space-x-3"><h4 class="text-sm font-semibold text-gray-900 dark:text-gray-100"> </h4> <!></div> <p class="text-xs text-gray-500 dark:text-gray-400"> </p></div> <p class="text-xs text-gray-600 dark:text-gray-400 mt-1"> </p></div> <div class="px-6 py-4"><p class="text-sm text-gray-700 dark:text-gray-300 leading-relaxed"> </p></div> <div class="p-2"><!></div></div></div></div>');function dl(r,e){xe(e,!0);let t=Z(e,"showConnector",3,!1);function n(E){return new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}var a=ll(),i=f(a);{var s=E=>{var T=el();w(E,T)};B(i,E=>{t()&&E(s)})}var l=A(i,2),d=f(l),u=f(d);{var y=E=>{var T=tl();w(E,T)},m=E=>{var T=ge(),R=oe(T);{var W=V=>{var G=rl();w(V,G)},q=V=>{var G=nl();w(V,G)};B(R,V=>{e.commit.type==="mapping"?V(W):V(q,!1)},!0)}w(E,T)};B(u,E=>{e.commit.isPending?E(y):E(m,!1)})}c(d);var h=A(d,2),_=f(h),k=f(_),v=f(k),g=f(v),C=f(g,!0);c(g);var M=A(g,2);{var S=E=>{var T=al();w(E,T)},O=E=>{var T=il(),R=f(T,!0);c(T),H(()=>P(R,e.commit.shortHash)),w(E,T)};B(M,E=>{e.commit.isPending?E(S):E(O,!1)})}c(v);var b=A(v,2),p=f(b,!0);c(b),c(k);var x=A(k,2),N=f(x,!0);c(x),c(_);var F=A(_,2),I=f(F),D=f(I,!0);c(I),c(F);var z=A(F,2),L=f(z);{var K=E=>{var T=sl(),R=f(T);to(R,{get diff(){return e.commit.diff}}),c(T),w(E,T)},$=E=>{var T=ge(),R=oe(T);{var W=q=>{var V=ol(),G=f(V);Xo(G,{get yamlDiff(){return e.commit.yamlDiff}}),c(V),w(q,V)};B(R,q=>{e.commit.yamlDiff?.hasChanges&&q(W)},!0)}w(E,T)};B(L,E=>{e.commit.diff&&!e.commit.yamlDiff?.hasChanges?E(K):E($,!1)})}c(z),c(h),c(l),c(a),H(E=>{P(C,e.commit.fileType||(e.commit.type==="mapping"?"Mappings":"Control File")),P(p,E),P(N,e.commit.author),P(D,e.commit.message)},[()=>n(e.commit.date)]),w(r,a),_e()}var cl=j('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200"> </span>'),ul=j('<div class="mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg"><div class="block text-sm font-medium text-blue-700 dark:text-blue-300 mb-2">CCIs Found in Narrative</div> <div class="flex flex-wrap gap-2"></div></div>'),fl=j("<!> <!>",1),gl=(r,e)=>J(e,!0),vl=j('<button class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Add New Mapping</button>'),ml=j('<div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm"><!></div>'),hl=j('<div class="mb-4"><div class="space-y-4"></div></div>'),pl=j('<div class="space-y-6"><div class="mb-6"><!></div> <!></div>'),yl=j('<div class="flex items-center justify-center py-16"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-600 dark:text-gray-400">Loading activity timeline...</span></div>'),bl=j('<div class="mb-4"><div class="space-y-6"></div></div>'),xl=j("<div><!></div>"),_l=j('<div class="flex items-center px-3 py-1.5 bg-amber-50 dark:bg-amber-900/20 rounded-full"><svg class="w-4 h-4 mr-2 text-amber-500 animate-pulse" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13a.75.75 0 00-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 000-1.5h-3.25V5z" clip-rule="evenodd"></path></svg> <span class="text-amber-700 dark:text-amber-300 font-medium"></span></div>'),wl=j('<div class="flex items-center px-3 py-1.5 bg-green-50 dark:bg-green-900/20 rounded-full"><svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.236 4.53L8.083 10.5a.75.75 0 00-1.166 1.166l1.714 1.714a.75.75 0 001.19-.236l3.857-5.389z" clip-rule="evenodd"></path></svg> <span class="text-green-700 dark:text-green-300 font-medium">All changes saved</span></div>'),kl=j('<button class="px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 rounded-lg transition-colors duration-200" title="Save changes now (Ctrl+S)">Save Now</button>'),Sl=j('<header class="flex-shrink-0"><div class="py-5"><div class="flex items-center justify-between"><div class="flex items-center space-x-4"><div><h1 class="text-xl font-bold text-gray-900 dark:text-white tracking-tight"> </h1> <div class="flex items-center space-x-3 mt-1"><p class="text-sm text-gray-500 dark:text-gray-400 font-medium"> </p> <!></div></div></div> <div class="flex items-center space-x-4"><div class="flex items-center text-sm text-gray-500 dark:text-gray-400"><!></div> <!></div></div></div></header> <div class="mb-2"><!></div> <main class="flex-1 overflow-auto pt-4"><div><!></div></main>',1);function cd(r,e){xe(e,!0);const[t,n]=tn(),a=()=>rt(Nt,"$mappings",t),i=U=>{{let Y=le(()=>o(u)?.schema?{name:o(u).schema.name,version:o(u).schema.version,description:"Control identification and basic information",fields:o(u).schema.fields.filter(X=>X.group==="identification"||X.group==="description").map(X=>({id:X.id,label:X.label,type:X.type==="multi-select"?"multiselect":X.type,required:X.required||!1,options:X.options,description:X.description,group:X.group}))}:{name:"Loading...",version:"0.0.0",description:"Loading schema...",fields:[]});En(U,{get schema(){return o(Y)},get control(){return o(y)},set control(X){J(y,X,!0)}})}},s=U=>{var Y=fl(),X=oe(Y);{var tt=ce=>{var Q=ul(),qe=A(f(Q),2);Le(qe,21,()=>o(O),je,(ht,Ae)=>{var se=cl(),Fe=f(se,!0);c(se),H(()=>P(Fe,o(Ae))),w(ht,se)}),c(qe),c(Q),w(ce,Q)};B(X,ce=>{o(O).length>0&&ce(tt)})}var Ze=A(X,2);{let ce=le(()=>o(u)?.schema?{name:o(u).schema.name,version:o(u).schema.version,description:"Control implementation and compliance details",fields:o(u).schema.fields.filter(Q=>Q.group==="implementation"||Q.group==="compliance").map(Q=>({id:Q.id,label:Q.label,type:Q.type==="multi-select"?"multiselect":Q.type,required:Q.required||!1,options:Q.options,description:Q.description,group:Q.group}))}:{name:"Loading...",version:"0.0.0",description:"Loading schema...",fields:[]});En(Ze,{get schema(){return o(ce)},get control(){return o(y)},set control(Q){J(y,Q,!0)}})}w(U,Y)},l=U=>{var Y=pl(),X=f(Y),tt=f(X);{var Ze=Ae=>{var se=vl();se.__click=[gl,_],w(Ae,se)},ce=Ae=>{var se=ml(),Fe=f(se);{let lt=le(()=>o(k)?$:D),pt=le(()=>o(k)?"Update Mapping":"Create Mapping");Ks(Fe,{get initialData(){return o(M)},get onSubmit(){return o(lt)},onCancel:z,get submitLabel(){return o(pt)}})}c(se),w(Ae,se)};B(tt,Ae=>{o(_)?Ae(ce,!1):Ae(Ze)})}c(X);var Q=A(X,2);{var qe=Ae=>{var se=hl(),Fe=f(se);Le(Fe,21,()=>o(b),je,(lt,pt)=>{Hs(lt,{get mapping(){return o(pt)},showActions:!0,onEdit:K,onDelete:E})}),c(Fe),c(se),w(Ae,se)},ht=Ae=>{An(Ae,{title:"No mappings yet",description:"Create your first mapping for this control."})};B(Q,Ae=>{o(b).length>0?Ae(qe):Ae(ht,!1)})}c(Y),w(U,Y)},d=U=>{var Y=xl(),X=f(Y);{var tt=ce=>{var Q=yl();w(ce,Q)},Ze=ce=>{var Q=ge(),qe=oe(Q);{var ht=se=>{var Fe=bl(),lt=f(Fe);Le(lt,21,()=>o(p),je,(pt,Jt,ja)=>{{let La=le(()=>ja<o(p).length-1);dl(pt,{get commit(){return o(Jt)},get showConnector(){return o(La)}})}}),c(lt),c(Fe),w(se,Fe)},Ae=se=>{{let Fe=le(()=>o(g)?.unifiedHistory.totalCommits===0?"This control and its mapping files are new and haven't been committed to git yet.":"Unable to load git history for this control and its mappings.");An(se,{title:"No activity history found",get description(){return o(Fe)},size:"lg"})}};B(qe,se=>{o(p).length>0?se(ht):se(Ae,!1)},!0)}w(ce,Q)};B(X,ce=>{o(C)?ce(tt):ce(Ze,!1)})}c(Y),w(U,Y)};let u=ke(null),y=ke(gt({...e.control,inherited:e.control.inherited||"","test-results":e.control["test-results"]||""})),m=ke(gt({...e.control})),h=ke("details"),_=ke(!1),k=ke(null),v=null,g=ke(null),C=ke(!1),M=ke(gt({justification:"",status:"planned"}));const S=le(()=>JSON.stringify(o(y))!==JSON.stringify(o(m))),O=le(()=>W(o(y)["control-implementation-narrative"]||"")),b=le(()=>o(g)?.mappings||a().filter(U=>U.control_id===e.control.id)),p=le(()=>o(g)?.unifiedHistory.commits||[]),x=le(()=>o(S)?"unsaved":"saved"),N=le(()=>!1);Qt(()=>(v&&clearInterval(v),J(y,{...e.control,inherited:e.control.inherited||"","test-results":e.control["test-results"]||""},!0),J(m,{...e.control,inherited:e.control.inherited||"","test-results":e.control["test-results"]||""},!0),J(g,null),J(C,!1),J(h,"details"),J(k,null),v=setInterval(F,1e4),()=>{v&&clearInterval(v)}));async function F(){if(o(S))try{await nt.updateControl(o(y)),J(m,{...o(y)},!0),console.log("Auto-saved control changes")}catch(U){console.error("Auto-save failed:",U)}}Qt(()=>{function U(Y){(Y.ctrlKey||Y.metaKey)&&Y.key==="s"&&(Y.preventDefault(),o(S)&&I())}return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)}),Qt(()=>{(o(h)==="history"||e.control)&&R()}),Qt(()=>{T()});async function I(){try{await nt.updateControl(o(y)),J(m,{...o(y)},!0),console.log("Manual save completed")}catch(U){console.error("Manual save failed:",U)}}async function D(U){try{const Y={control_id:e.control.id,justification:U.justification,status:U.status,source_entries:[]};await nt.createMapping(Y),L()}catch(Y){console.error("Failed to create mapping:",Y)}}function z(){L()}function L(){J(M,{justification:"",status:"planned"},!0),J(_,!1),J(k,null)}function K(U){J(k,{...U},!0),J(_,!0),J(M,{justification:U.justification,status:U.status},!0)}async function $(U){if(o(k))try{const Y={...o(k),justification:U.justification,status:U.status};await nt.updateMapping(Y),L()}catch(Y){console.error("Failed to update mapping:",Y)}}async function E(U){try{await nt.deleteMapping(U),o(g)&&(J(g,null),R())}catch(Y){console.error("Failed to delete mapping:",Y)}}async function T(){try{J(u,await ct.getControlSet(),!0)}catch(U){console.error("Failed to load control set:",U)}}async function R(){if(!(o(g)||o(C))){J(C,!0);try{J(g,await ct.getControlComplete(e.control.id,50),!0)}catch(U){console.error("Failed to load complete data:",U),J(g,{control:e.control,mappings:a().filter(Y=>Y.control_id===e.control.id),unifiedHistory:{commits:[],totalCommits:0,controlCommits:0,mappingCommits:0}},!0)}finally{J(C,!1)}}}function W(U){const Y=/CCI-(\d{6})/g,X=U.match(Y);return X?[...new Set(X)]:[]}var q=Sl(),V=oe(q),G=f(V),re=f(G),he=f(re),ye=f(he),Ne=f(ye),ne=f(Ne,!0);c(Ne);var te=A(Ne,2),ie=f(te),ve=f(ie);c(ie);var be=A(ie,2);ea(be,{get status(){return o(y)["control-implementation-status"]},type:"control",size:"sm"}),c(te),c(ye),c(he);var me=A(he,2),we=f(me),ue=f(we);{var Ee=U=>{var Y=_l(),X=A(f(Y),2);X.textContent=o(N)?"Auto-saving...":"Changes pending...",c(Y),w(U,Y)},Be=U=>{var Y=wl();w(U,Y)};B(ue,U=>{o(N)||o(x)==="unsaved"?U(Ee):U(Be,!1)})}c(we);var fe=A(we,2);{var Ie=U=>{var Y=kl();Y.__click=I,w(U,Y)};B(fe,U=>{o(S)&&U(Ie)})}c(me),c(re),c(G),c(V);var We=A(V,2),Ge=f(We);{let U=le(()=>[{id:"details",label:"Details",icon:es},{id:"narrative",label:"Implementation",icon:Qi},{id:"mappings",label:"Mappings",icon:Yi,count:o(b).length},{id:"history",label:"Timeline",icon:ns,count:o(g)?.unifiedHistory.totalCommits}]);ds(Ge,{get active(){return o(h)},get tabs(){return o(U)},onSelect:Y=>J(h,Y,!0)})}c(We);var Qe=A(We,2),mt=f(Qe),st=f(mt);{var ot=U=>{i(U)},Ut=U=>{var Y=ge(),X=oe(Y);{var tt=ce=>{s(ce)},Ze=ce=>{var Q=ge(),qe=oe(Q);{var ht=se=>{l(se)},Ae=se=>{var Fe=ge(),lt=oe(Fe);{var pt=Jt=>{d(Jt)};B(lt,Jt=>{o(h)==="history"&&Jt(pt)},!0)}w(se,Fe)};B(qe,se=>{o(h)==="mappings"?se(ht):se(Ae,!1)},!0)}w(ce,Q)};B(X,ce=>{o(h)==="narrative"?ce(tt):ce(Ze,!1)},!0)}w(U,Y)};B(st,U=>{o(h)==="details"?U(ot):U(Ut,!1)})}c(mt),c(Qe),H(()=>{P(ne,e.control["control-acronym"]),P(ve,`${e.control["control-implementation-status"]??""} â¢ ${e.control["compliance-status"]??""}`)}),w(r,q),_e(),n()}De(["click"]);var Cl=j('<div class="text-sm text-gray-500 dark:text-gray-400">Loading...</div>'),Al=j('<span class="font-normal text-gray-600 dark:text-gray-300"> </span>'),Ol=j('<div class="text-gray-600 dark:text-gray-400 mt-1"> </div>'),Nl=j('<div class="text-sm"><div class="font-medium text-gray-900 dark:text-white"> <!></div> <!></div>'),El=j('<div class="text-sm text-gray-500 dark:text-gray-400">No control set info</div>');function ud(r,e){xe(e,!0);let t=Z(e,"controlSet",15,null),n=ke(!0);vi(async()=>{try{const d=await fetch("/api/control-set");d.ok&&t(await d.json())}catch(d){console.error("Failed to load control set info:",d)}finally{J(n,!1)}});var a=ge(),i=oe(a);{var s=d=>{var u=Cl();w(d,u)},l=d=>{var u=ge(),y=oe(u);{var m=_=>{var k=Nl(),v=f(k),g=f(v),C=A(g);{var M=b=>{var p=Al(),x=f(p,!0);c(p),H(()=>P(x,t().version)),w(b,p)};B(C,b=>{t().version&&b(M)})}c(v);var S=A(v,2);{var O=b=>{var p=Ol(),x=f(p,!0);c(p),H(()=>P(x,t().description)),w(b,p)};B(S,b=>{t().description&&b(O)})}c(k),H(()=>P(g,`${t().name??""} `)),w(_,k)},h=_=>{var k=El();w(_,k)};B(y,_=>{t()?_(m):_(h,!1)},!0)}w(d,u)};B(i,d=>{o(n)?d(s):d(l,!1)})}w(r,a),_e()}const Ml={name:"Internal Control Format",version:"1.0.0",description:"Git-friendly YAML format for storing control implementation details",groups:[{id:"identification",label:"Identification",description:"Control identification fields",defaultExpanded:!0},{id:"description",label:"Description",description:"Control description and information",defaultExpanded:!0},{id:"implementation",label:"Implementation",description:"Implementation status and details",defaultExpanded:!0},{id:"compliance",label:"Compliance",description:"Compliance status and testing",defaultExpanded:!1}],fields:[{id:"id",label:"Control Instance ID",type:"text",required:!0,group:"identification",helpText:"Unique identifier for this control instance"},{id:"control-acronym",label:"Control Acronym",type:"text",required:!0,group:"identification",helpText:"Base control identifier (e.g., AC-1)"},{id:"control-information",label:"Control Information",type:"textarea",required:!0,group:"description",helpText:"Full control description, guidance, and assessment methods"},{id:"control-implementation-status",label:"Implementation Status",type:"select",required:!0,group:"implementation",options:["Implemented","Planned","Not Implemented"],helpText:"Current implementation status of this control"},{id:"security-control-designation",label:"Control Designation",type:"select",required:!0,group:"implementation",options:["Common","Hybrid","System-Specific"],helpText:"How this control is designated in the authorization boundary"},{id:"control-implementation-narrative",label:"Implementation Narrative",type:"textarea",required:!0,group:"implementation",helpText:"Detailed description of how this control is implemented"},{id:"cci",label:"CCI Number",type:"text",required:!0,group:"identification",helpText:"Control Correlation Identifier"},{id:"cci-definition",label:"CCI Definition",type:"textarea",required:!0,group:"description",helpText:"Definition of the CCI requirement"},{id:"implementation-guidance",label:"Implementation Guidance",type:"textarea",required:!0,group:"implementation",helpText:"Specific guidance for implementing this control"},{id:"assessment-procedures",label:"Assessment Procedures",type:"textarea",required:!0,group:"compliance",helpText:"Procedures for assessing this control"},{id:"inherited",label:"Inherited From",type:"text",required:!1,group:"implementation",helpText:"Source of inheritance (if applicable)"},{id:"remote-inheritance-instance",label:"Remote Inheritance Instance",type:"text",required:!1,group:"implementation",helpText:"Remote system providing inheritance"},{id:"compliance-status",label:"Compliance Status",type:"select",required:!0,group:"compliance",options:["Compliant","Non-Compliant","Not Assessed"],helpText:"Current compliance assessment status"},{id:"test-results",label:"Test Results",type:"textarea",required:!1,group:"compliance",helpText:"Results of testing or assessment activities"}]};class jl{id="internal-yaml";name="Internal YAML Format";version="1.0.0";schema=Ml;async import(e,t){try{const n=Array.isArray(e.controls)?e.controls:Array.isArray(e)?e:[e],a=[],i=[];for(const s of n){const l=await this.validateControl(s);l.valid||(a.push(...l.warnings),a.push(...l.errors.map(d=>({field:d.field,message:d.message,path:d.path})))),i.push(s)}return{controls:i,warnings:a,summary:{controlsImported:i.length,skipped:0,errors:0}}}catch(n){throw new Error(`Failed to import native format: ${n instanceof Error?n.message:String(n)}`)}}async export(e,t){try{return{data:{controls:e.map(a=>({...a}))},mimeType:"application/x-yaml",filename:"controls.yaml",warnings:[]}}catch(n){throw new Error(`Failed to export native format: ${n instanceof Error?n.message:String(n)}`)}}async validate(e){const t=[],n=[];try{if(!e||typeof e!="object")return t.push({message:"Data must be an object"}),{valid:!1,errors:t,warnings:n};if(this.isControl(e))return await this.validateControl(e);if(e.controls&&Array.isArray(e.controls))for(let a=0;a<e.controls.length;a++){const i=await this.validateControl(e.controls[a]);i.valid||t.push(...i.errors.map(s=>({...s,path:`controls[${a}].${s.field||"unknown"}`}))),n.push(...i.warnings)}return{valid:t.length===0,errors:t,warnings:n}}catch(a){return t.push({message:`Validation error: ${a instanceof Error?a.message:String(a)}`}),{valid:!1,errors:t,warnings:n}}}canHandle(e){return!e||typeof e!="object"?!1:this.isControl(e)?!0:e.controls&&Array.isArray(e.controls)?e.controls.some(t=>this.isControl(t)):!1}isControl(e){return e&&typeof e=="object"&&typeof e.id=="string"&&typeof e["control-acronym"]=="string"&&typeof e.cci=="string"}async validateControl(e){const t=[],n=[];for(const a of this.schema.fields){const i=e[a.id];if(a.required&&(i==null||i==="")){t.push({field:a.id,message:`${a.label} is required`});continue}if(i!=null&&(a.type==="select"&&a.options&&!a.options.includes(i)&&t.push({field:a.id,message:`${a.label} must be one of: ${a.options.join(", ")}`}),a.validation))for(const s of a.validation){const l=this.validateField(i,s,a.label);l&&t.push({field:a.id,message:l})}}return{valid:t.length===0,errors:t,warnings:n}}validateField(e,t,n){switch(t.type){case"required":if(!e||typeof e=="string"&&e.trim()==="")return t.message||`${n} is required`;break;case"minLength":if(typeof e=="string"&&e.length<t.value)return t.message||`${n} must be at least ${t.value} characters`;break;case"maxLength":if(typeof e=="string"&&e.length>t.value)return t.message||`${n} must be no more than ${t.value} characters`;break;case"pattern":if(typeof e=="string"&&t.value&&!new RegExp(t.value).test(e))return t.message||`${n} format is invalid`;break}return null}}const Ll={name:"NIST OSCAL Catalog",version:"1.1.1",description:"Official NIST Open Security Controls Assessment Language format",groups:[{id:"source",label:"Source Information",description:"Information about the OSCAL catalog source",defaultExpanded:!0}],fields:[{id:"catalog.uuid",label:"Catalog UUID",type:"text",required:!0,group:"source",helpText:"Unique identifier for the OSCAL catalog"},{id:"catalog.metadata.title",label:"Catalog Title",type:"text",required:!0,group:"source",helpText:"Official title of the catalog"},{id:"catalog.metadata.version",label:"Version",type:"text",required:!0,group:"source",helpText:"Version of the control catalog"}]};class Il{id="oscal-import";name="NIST OSCAL Import";version="1.1.1";schema=Ll;async import(e,t){try{const n=e,a=[],i=[];if(!n.catalog)throw new Error("Invalid OSCAL format: missing catalog object");for(const s of n.catalog.groups||[])for(const l of s.controls||[])try{const d=this.convertOSCALControl(l,s);if(i.push(d),l.controls)for(const u of l.controls){const y=this.convertOSCALControl(u,s,l.id);i.push(y)}}catch(d){a.push({field:l.id,message:`Failed to convert control ${l.id}: ${d instanceof Error?d.message:String(d)}`})}return{controls:i,metadata:{oscalCatalog:{uuid:n.catalog.uuid,title:n.catalog.metadata.title,version:n.catalog.metadata.version,lastModified:n.catalog.metadata["last-modified"],oscalVersion:n.catalog.metadata["oscal-version"]},importTimestamp:new Date().toISOString(),sourceFormat:"oscal-catalog"},warnings:a,summary:{controlsImported:i.length,skipped:a.length,errors:0}}}catch(n){throw new Error(`Failed to import OSCAL catalog: ${n instanceof Error?n.message:String(n)}`)}}async export(e,t){throw new Error("OSCAL import adapter is for importing only. Use oscal-export adapter for exporting.")}async validate(e){const t=[],n=[];try{if(!e||typeof e!="object")return t.push({message:"Data must be an object"}),{valid:!1,errors:t,warnings:n};const a=e;return a.catalog?(a.catalog.uuid||t.push({field:"catalog.uuid",message:"Missing catalog UUID"}),a.catalog.metadata?(a.catalog.metadata.title||t.push({field:"catalog.metadata.title",message:"Missing catalog title"}),a.catalog.metadata.version||t.push({field:"catalog.metadata.version",message:"Missing catalog version"})):t.push({field:"catalog.metadata",message:"Missing catalog metadata"}),!a.catalog.groups||!Array.isArray(a.catalog.groups)?n.push({message:"No control groups found in catalog"}):a.catalog.groups.length===0&&n.push({message:"Catalog contains no control groups"})):t.push({message:'Missing required "catalog" object'}),{valid:t.length===0,errors:t,warnings:n}}catch(a){return t.push({message:`Validation error: ${a instanceof Error?a.message:String(a)}`}),{valid:!1,errors:t,warnings:n}}}canHandle(e){return!!(e&&typeof e=="object"&&e.catalog&&typeof e.catalog=="object"&&e.catalog.metadata&&e.catalog.groups&&Array.isArray(e.catalog.groups))}convertOSCALControl(e,t,n){const a=n?`${n.toUpperCase()}.${this.extractEnhancementNumber(e.id)}`:e.id.toUpperCase(),i=n?n.toUpperCase():e.id.toUpperCase(),s=this.extractControlInformation(e),l=this.generateTempCCI(e.id);return{id:a,"control-acronym":i,"control-information":s,"control-implementation-status":"Not Implemented","security-control-designation":"System-Specific","control-implementation-narrative":`Implementation narrative for ${e.title}. Please update with actual implementation details.`,cci:l,"cci-definition":`CCI definition for ${e.title}`,"implementation-guidance":this.extractImplementationGuidance(e),"assessment-procedures":this.extractAssessmentProcedures(e),"compliance-status":"Not Assessed"}}extractControlInformation(e){const t=[];t.push(`Title: ${e.title}`);const n=this.findPartByName(e.parts,"statement");n&&(t.push(`
Statement:`),t.push(this.extractProseFromPart(n)));const a=this.findPartByName(e.parts,"guidance");return a&&(t.push(`
Supplemental Guidance:`),t.push(this.extractProseFromPart(a))),t.join(`
`)}extractImplementationGuidance(e){const t=this.findPartByName(e.parts,"guidance");return t?this.extractProseFromPart(t):`Implementation guidance for ${e.title}`}extractAssessmentProcedures(e){const t=this.findPartByName(e.parts,"objectives");return t?this.extractProseFromPart(t):`Assessment procedures for ${e.title}`}findPartByName(e,t){return e.find(n=>n.name===t)}extractProseFromPart(e){const t=[];if(e.prose&&t.push(e.prose),e.parts)for(const n of e.parts){const a=this.extractProseFromPart(n);a&&t.push(a)}return t.join(`
`)}extractEnhancementNumber(e){const t=e.match(/\.(\d+)$/);return t?t[1]:"1"}generateTempCCI(e){const t=e.split("").reduce((n,a)=>(n=(n<<5)-n+a.charCodeAt(0),n&n),0);return Math.abs(t).toString().padStart(6,"0").substring(0,6)}}class Lt{adapters=new Map;static instance;constructor(){this.registerBuiltInAdapters()}static getInstance(){return Lt.instance||(Lt.instance=new Lt),Lt.instance}register(e){if(!e.id)throw new Error("Adapter must have an ID");this.adapters.has(e.id)&&console.warn(`Adapter '${e.id}' is already registered. Overwriting.`),this.adapters.set(e.id,e),console.log(`Registered adapter: ${e.id} (${e.name})`)}get(e){return this.adapters.get(e)}list(){return Array.from(this.adapters.keys())}getAll(){return Array.from(this.adapters.values())}detect(e){for(const t of this.adapters.values())try{if(t.canHandle(e))return t}catch(n){console.warn(`Adapter ${t.id} threw error during detection:`,n)}}unregister(e){const t=this.adapters.delete(e);return t&&console.log(`Unregistered adapter: ${e}`),t}getAdapterInfo(){return this.getAll().map(e=>({id:e.id,name:e.name,version:e.version,description:e.schema.description,schemaName:e.schema.name}))}validateAdapter(e){const t=[];return(!e.id||e.id.trim()==="")&&t.push("Adapter must have a non-empty ID"),(!e.name||e.name.trim()==="")&&t.push("Adapter must have a non-empty name"),(!e.version||e.version.trim()==="")&&t.push("Adapter must have a version"),e.schema?((!e.schema.name||e.schema.name.trim()==="")&&t.push("Schema must have a name"),!e.schema.fields||!Array.isArray(e.schema.fields)?t.push("Schema must have fields array"):e.schema.fields.length===0&&t.push("Schema must have at least one field")):t.push("Adapter must have a schema"),typeof e.import!="function"&&t.push("Adapter must implement import method"),typeof e.export!="function"&&t.push("Adapter must implement export method"),typeof e.validate!="function"&&t.push("Adapter must implement validate method"),typeof e.canHandle!="function"&&t.push("Adapter must implement canHandle method"),t}registerBuiltInAdapters(){try{const e=new jl;this.register(e);const t=new Il;this.register(t)}catch(e){console.error("Failed to register built-in adapters:",e)}}reset(){this.adapters.clear(),this.registerBuiltInAdapters()}getStats(){const e=this.getAll(),t={},n={};return e.forEach(a=>{const i=a.schema.name;t[i]=(t[i]||0)+1,n[i]||(n[i]=[]),n[i].includes(a.version)||n[i].push(a.version)}),{totalAdapters:e.length,adaptersByType:t,schemaVersions:n}}}const Ma=Lt.getInstance();function Tl(r){return Ma.get(r)}function Dl(){return Ma.getAll()}var Fl=(r,e,t)=>{J(e,{visibleFields:t.fields.map(n=>n.id),fieldOrder:t.fields.map(n=>n.id),groupOrder:t.groups.map(n=>n.id),groupVisibility:Object.fromEntries(t.groups.map(n=>[n.id,!0]))},!0),t.onConfigChange?.(o(e))},Pl=(r,e,t)=>e(o(t)),Bl=j('<span class="text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 px-1.5 py-0.5 rounded">Required</span>'),$l=(r,e,t)=>e(o(t).id),Vl=j('<div draggable="true" role="button" tabindex="0" aria-label="Drag to reorder field"><div class="flex items-center justify-between"><div class="flex items-center space-x-3"><svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"></path></svg> <div class="min-w-0 flex-1"><div class="flex items-center space-x-2"><span class="font-medium text-gray-900 dark:text-white"> </span> <!></div> <p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5"> </p></div></div> <label class="flex items-center space-x-2 cursor-pointer"><input type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"/> <span class="text-sm text-gray-600 dark:text-gray-400">Show</span></label></div></div>'),ql=j('<div class="divide-y divide-gray-200 dark:divide-gray-700"></div>'),zl=j('<div><div draggable="true" role="button" tabindex="0" aria-label="Drag to reorder group"><div class="flex items-center justify-between"><div class="flex items-center space-x-3"><div class="flex items-center space-x-2"><svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"></path></svg> <span class="font-medium text-gray-900 dark:text-white"> </span></div> <span class="text-xs text-gray-500 dark:text-gray-400 bg-gray-200 dark:bg-gray-800 px-2 py-0.5 rounded-full"> </span></div> <label class="flex items-center space-x-2 cursor-pointer"><input type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"/> <span class="text-sm text-gray-600 dark:text-gray-400">Visible</span></label></div></div> <!></div>'),Hl=(r,e,t)=>e(o(t).id),Rl=j('<div class="flex items-center justify-between py-2 px-3 bg-gray-100 dark:bg-gray-900 rounded-md"><span class="text-sm text-gray-700 dark:text-gray-300"> </span> <button class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300">Show</button></div>'),Ul=j('<div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4"><h4 class="font-medium text-gray-900 dark:text-white mb-3">Hidden Fields</h4> <div class="space-y-2"></div></div>'),Jl=j('<div class="field-editor space-y-6 svelte-g67d4n"><div class="flex items-center justify-between"><div><h3 class="text-lg font-medium text-gray-900 dark:text-white">Field Configuration</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Configure which fields are visible and their order</p></div> <button class="px-3 py-1.5 text-xs font-medium bg-gray-100 dark:bg-gray-900 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors">Reset to Defaults</button></div> <div class="space-y-4"></div> <!></div>');function Kl(r,e){xe(e,!0);let t=ke(null),n=ke(null),a=ke(null),i=ke(gt({visibleFields:e.fields.map(x=>x.id),fieldOrder:e.fields.map(x=>x.id),groupOrder:e.groups.map(x=>x.id),groupVisibility:Object.fromEntries(e.groups.map(x=>[x.id,!0]))})),s=le(()=>()=>{const x=new Map;return o(i).groupOrder.forEach(N=>{x.set(N,[])}),o(i).fieldOrder.forEach(N=>{const F=e.fields.find(I=>I.id===N);if(F&&o(i).visibleFields.includes(N)){const I=x.get(F.group||"default")||[];I.push(F),x.set(F.group||"default",I)}}),x});function l(x){J(t,x,!0),J(n,null)}function d(){J(t,null),J(a,null)}function u(x,N){x.preventDefault(),J(a,N,!0)}function y(x,N){if(x.preventDefault(),!o(t))return;const F=o(i).fieldOrder.indexOf(o(t).id),I=o(i).fieldOrder.indexOf(N);if(F===-1||I===-1)return;const D=[...o(i).fieldOrder];D.splice(F,1),D.splice(I,0,o(t).id),o(i).fieldOrder=D,J(a,null),e.onConfigChange?.(o(i))}function m(x){J(n,x,!0),J(t,null)}function h(){J(n,null),J(a,null)}function _(x,N){x.preventDefault(),J(a,N,!0)}function k(x,N){if(x.preventDefault(),!o(n))return;const F=o(i).groupOrder.indexOf(o(n).id),I=o(i).groupOrder.indexOf(N);if(F===-1||I===-1)return;const D=[...o(i).groupOrder];D.splice(F,1),D.splice(I,0,o(n).id),o(i).groupOrder=D,J(a,null),e.onConfigChange?.(o(i))}function v(x){o(i).visibleFields.includes(x)?o(i).visibleFields=o(i).visibleFields.filter(N=>N!==x):o(i).visibleFields=[...o(i).visibleFields,x],e.onConfigChange?.(o(i))}function g(x){o(i).groupVisibility[x]=!o(i).groupVisibility[x],e.onConfigChange?.(o(i))}var C=Jl(),M=f(C),S=A(f(M),2);S.__click=[Fl,i,e],c(M);var O=A(M,2);Le(O,21,()=>o(i).groupOrder,je,(x,N)=>{var F=ge(),I=oe(F);{var D=z=>{var L=ge();const K=le(()=>e.groups.find(R=>R.id===o(N))),$=le(()=>o(s)().get(o(N))||[]);var E=oe(L);{var T=R=>{var W=zl();let q;var V=f(W);let G;var re=f(V),he=f(re),ye=f(he),Ne=A(f(ye),2),ne=f(Ne,!0);c(Ne),c(ye);var te=A(ye,2),ie=f(te);c(te),c(he);var ve=A(he,2),be=f(ve);ft(be),be.__change=[Pl,g,N],Ue(2),c(ve),c(re),c(V);var me=A(V,2);{var we=ue=>{var Ee=ql();Le(Ee,21,()=>o($),je,(Be,fe)=>{var Ie=Vl();let We;var Ge=f(Ie),Qe=f(Ge),mt=A(f(Qe),2),st=f(mt),ot=f(st),Ut=f(ot,!0);c(ot);var U=A(ot,2);{var Y=Q=>{var qe=Bl();w(Q,qe)};B(U,Q=>{o(fe).required&&Q(Y)})}c(st);var X=A(st,2),tt=f(X,!0);c(X),c(mt),c(Qe);var Ze=A(Qe,2),ce=f(Ze);ft(ce),ce.__change=[$l,v,fe],Ue(2),c(Ze),c(Ge),c(Ie),H((Q,qe)=>{We=ae(Ie,1,"px-4 py-3 cursor-move select-none hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors",null,We,Q),P(Ut,o(fe).label),P(tt,o(fe).helpText||`${o(fe).type} field`),br(ce,qe)},[()=>({"opacity-50":o(t)?.id===o(fe).id,"ring-2":o(a)===o(fe).id,"ring-blue-500":o(a)===o(fe).id,"bg-gray-100":!o(i).visibleFields.includes(o(fe).id),"dark:bg-gray-900":!o(i).visibleFields.includes(o(fe).id)}),()=>o(i).visibleFields.includes(o(fe).id)]),dt("dragstart",Ie,()=>l(o(fe))),dt("dragend",Ie,d),dt("dragover",Ie,Q=>u(Q,o(fe).id)),dt("drop",Ie,Q=>y(Q,o(fe).id)),w(Be,Ie)}),c(Ee),w(ue,Ee)};B(me,ue=>{o(i).groupVisibility[o(N)]&&ue(we)})}c(W),H((ue,Ee)=>{q=ae(W,1,"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",null,q,ue),G=ae(V,1,"bg-gray-50 dark:bg-gray-900 px-4 py-3 cursor-move select-none",null,G,Ee),P(ne,o(K).label),P(ie,`${o($).length??""} fields`),br(be,o(i).groupVisibility[o(N)])},[()=>({"ring-2":o(a)===o(N),"ring-blue-500":o(a)===o(N)}),()=>({"opacity-50":o(n)?.id===o(N)})]),dt("dragstart",V,()=>m(o(K))),dt("dragend",V,h),dt("dragover",V,ue=>_(ue,o(N))),dt("drop",V,ue=>k(ue,o(N))),w(R,W)};B(E,R=>{o(K)&&R(T)})}w(z,L)};B(I,z=>{e.groups.find(L=>L.id===o(N))&&z(D)})}w(x,F)}),c(O);var b=A(O,2);{var p=x=>{var N=Ul();const F=le(()=>e.fields.filter(D=>!o(i).visibleFields.includes(D.id)));var I=A(f(N),2);Le(I,21,()=>o(F),je,(D,z)=>{var L=Rl(),K=f(L),$=f(K,!0);c(K);var E=A(K,2);E.__click=[Hl,v,z],c(L),H(()=>P($,o(z).label)),w(D,L)}),c(I),c(N),w(x,N)};B(b,x=>{e.fields.filter(N=>!o(i).visibleFields.includes(N.id)).length>0&&x(p)})}c(C),w(r,C),_e()}De(["click","change"]);var Yl=(r,e)=>r.key==="Escape"&&e.onClose(),Wl=j('<div class="text-xs text-blue-600 dark:text-blue-300"> </div>'),Gl=j('<div class="mt-2 space-y-1"></div>'),Ql=j('<div class="mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"><div class="text-xs text-blue-800 dark:text-blue-200 font-medium mb-2"> </div> <div class="text-xs text-blue-700 dark:text-blue-300"> </div> <!></div>'),Zl=j('<div class="fixed inset-0 z-50 overflow-hidden" aria-labelledby="slide-over-title" role="dialog" aria-modal="true"><div class="absolute inset-0 overflow-hidden"><div class="absolute inset-0 bg-gray-600 dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-75 transition-opacity" role="button" tabindex="0"></div> <div class="pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10"><div class="pointer-events-auto relative w-screen max-w-md"><div class="absolute left-0 top-0 -ml-8 flex pr-2 pt-4 sm:-ml-10 sm:pr-4"><button class="relative rounded-md text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white"><span class="absolute -inset-2.5"></span> <span class="sr-only">Close panel</span> <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex h-full flex-col overflow-y-scroll bg-white dark:bg-gray-900 py-6 shadow-xl"><div class="px-4 sm:px-6"><h2 class="text-base font-semibold leading-6 text-gray-900 dark:text-white" id="slide-over-title">Settings</h2> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Configure how controls are displayed and edited</p></div> <div class="relative mt-6 flex-1 px-4 sm:px-6 space-y-6"><div class="border-b border-gray-200 dark:border-gray-700 pb-6"><h3 class="text-sm font-medium text-gray-900 dark:text-white mb-4">User Interface</h3></div> <div class="border-b border-gray-200 dark:border-gray-700 pb-6"><!></div> <div class="border-t border-gray-200 dark:border-gray-700 pt-6"><h3 class="text-sm font-medium text-gray-900 dark:text-white mb-4">System Information</h3> <dl class="space-y-3 text-sm"><div class="flex justify-between"><dt class="text-gray-500 dark:text-gray-400">Import Adapters Available</dt> <dd class="text-gray-900 dark:text-white font-medium"> </dd></div> <div class="flex justify-between"><dt class="text-gray-500 dark:text-gray-400">Storage Format</dt> <dd class="text-gray-900 dark:text-white font-medium">Native YAML</dd></div></dl> <!></div></div></div></div></div></div></div>');function fd(r,e){xe(e,!0);const t=Dl(),n=Tl("internal-yaml");var a=ge(),i=oe(a);{var s=l=>{var d=Zl(),u=f(d),y=f(u);y.__click=function(...D){e.onClose?.apply(this,D)},y.__keydown=[Yl,e];var m=A(y,2),h=f(m),_=f(h),k=f(_);k.__click=function(...D){e.onClose?.apply(this,D)},c(_);var v=A(_,2),g=A(f(v),2),C=A(f(g),2),M=f(C);{var S=D=>{{let z=le(()=>n.schema.groups||[]);Kl(D,{get fields(){return n.schema.fields},get groups(){return o(z)},onConfigChange:L=>console.log("Field config changed:",L)})}};B(M,D=>{n&&D(S)})}c(C);var O=A(C,2),b=A(f(O),2),p=f(b),x=A(f(p),2),N=f(x,!0);c(x),c(p),Ue(2),c(b);var F=A(b,2);{var I=D=>{var z=Ql(),L=f(z),K=f(L);c(L);var $=A(L,2),E=f($);c($);var T=A($,2);{var R=W=>{var q=Gl();Le(q,21,()=>n.schema.groups,je,(V,G)=>{var re=Wl(),he=f(re);c(re),H(ye=>P(he,`â¢ ${o(G).label??""}: ${ye??""} fields`),[()=>n.schema.fields.filter(ye=>ye.group===o(G).id).length]),w(V,re)}),c(q),w(W,q)};B(T,W=>{n.schema.groups&&W(R)})}c(z),H(()=>{P(K,`Active Schema: ${n.schema.name??""}`),P(E,`${n.schema.fields.length??""} fields across ${n.schema.groups?.length||1} sections`)}),w(D,z)};B(F,D=>{n&&D(I)})}c(O),c(g),c(v),c(h),c(m),c(u),c(d),H(()=>P(N,t.length)),w(l,d)};B(i,l=>{e.isOpen&&l(s)})}w(r,a),_e()}De(["click","keydown"]);var Xl=Ve("<title> </title>"),ed=Ve('<svg><!><path d="M25.7,9.3l-7-7C18.5,2.1,18.3,2,18,2H8C6.9,2,6,2.9,6,4v24c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V10C26,9.7,25.9,9.5,25.7,9.3	z M18,4.4l5.6,5.6H18V4.4z M24,28H8V4h8v6c0,1.1,0.9,2,2,2h6V28z"></path><path d="M10 22H22V24H10zM10 16H22V18H10z"></path></svg>');function gd(r,e){const t=Je(e,["children","$$slots","$$events","$$legacy"]),n=Je(t,["size","title"]);xe(e,!1);const a=$e(),i=$e();let s=Z(e,"size",8,16),l=Z(e,"title",8,void 0);Re(()=>(Me(t),Me(l())),()=>{J(a,t["aria-label"]||t["aria-labelledby"]||l())}),Re(()=>(o(a),Me(t)),()=>{J(i,{"aria-hidden":o(a)?void 0:!0,role:o(a)?"img":void 0,focusable:Number(t.tabindex)===0?!0:void 0})}),$t(),St();var d=ed();Vt(d,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:s(),height:s(),...o(i),...n}));var u=f(d);{var y=m=>{var h=Xl(),_=f(h,!0);c(h),H(()=>P(_,l())),w(m,h)};B(u,m=>{l()&&m(y)})}Ue(2),c(d),w(r,d),_e()}var td=Ve("<title> </title>"),rd=Ve('<svg><!><path d="M27,16.76c0-.25,0-.5,0-.76s0-.51,0-.77l1.92-1.68A2,2,0,0,0,29.3,11L26.94,7a2,2,0,0,0-1.73-1,2,2,0,0,0-.64.1l-2.43.82a11.35,11.35,0,0,0-1.31-.75l-.51-2.52a2,2,0,0,0-2-1.61H13.64a2,2,0,0,0-2,1.61l-.51,2.52a11.48,11.48,0,0,0-1.32.75L7.43,6.06A2,2,0,0,0,6.79,6,2,2,0,0,0,5.06,7L2.7,11a2,2,0,0,0,.41,2.51L5,15.24c0,.25,0,.5,0,.76s0,.51,0,.77L3.11,18.45A2,2,0,0,0,2.7,21L5.06,25a2,2,0,0,0,1.73,1,2,2,0,0,0,.64-.1l2.43-.82a11.35,11.35,0,0,0,1.31.75l.51,2.52a2,2,0,0,0,2,1.61h4.72a2,2,0,0,0,2-1.61l.51-2.52a11.48,11.48,0,0,0,1.32-.75l2.42.82a2,2,0,0,0,.64.1,2,2,0,0,0,1.73-1L29.3,21a2,2,0,0,0-.41-2.51ZM25.21,24l-3.43-1.16a8.86,8.86,0,0,1-2.71,1.57L18.36,28H13.64l-.71-3.55a9.36,9.36,0,0,1-2.7-1.57L6.79,24,4.43,20l2.72-2.4a8.9,8.9,0,0,1,0-3.13L4.43,12,6.79,8l3.43,1.16a8.86,8.86,0,0,1,2.71-1.57L13.64,4h4.72l.71,3.55a9.36,9.36,0,0,1,2.7,1.57L25.21,8,27.57,12l-2.72,2.4a8.9,8.9,0,0,1,0,3.13L27.57,20Z"></path><path d="M16,22a6,6,0,1,1,6-6A5.94,5.94,0,0,1,16,22Zm0-10a3.91,3.91,0,0,0-4,4,3.91,3.91,0,0,0,4,4,3.91,3.91,0,0,0,4-4A3.91,3.91,0,0,0,16,12Z"></path></svg>');function vd(r,e){const t=Je(e,["children","$$slots","$$events","$$legacy"]),n=Je(t,["size","title"]);xe(e,!1);const a=$e(),i=$e();let s=Z(e,"size",8,16),l=Z(e,"title",8,void 0);Re(()=>(Me(t),Me(l())),()=>{J(a,t["aria-label"]||t["aria-labelledby"]||l())}),Re(()=>(o(a),Me(t)),()=>{J(i,{"aria-hidden":o(a)?void 0:!0,role:o(a)?"img":void 0,focusable:Number(t.tabindex)===0?!0:void 0})}),$t(),St();var d=rd();Vt(d,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:s(),height:s(),...o(i),...n}));var u=f(d);{var y=m=>{var h=td(),_=f(h,!0);c(h),H(()=>P(_,l())),w(m,h)};B(u,m=>{l()&&m(y)})}Ue(2),c(d),w(r,d),_e()}export{ud as C,gd as D,vd as S,fd as a,dd as b,nt as c,cd as d,Ft as e,Cn as l,Wr as s};
